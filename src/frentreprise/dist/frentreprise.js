!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("frentreprise",[],t):"object"==typeof exports?exports.frentreprise=t():e.frentreprise=t()}(global,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=27)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3);const s=(e,t="yyyy-MM-dd")=>{if(!e)return null;e=e.trim();const n=["yyyy-MM-dd","yyyy/MM/dd","dd/MM/yyyy","ddMMMyyyy","dd/MM/yy","M/d/yy"];for(const s of n){const n=Object(r.parse)(e,s,new Date);if(Object(r.isValid)(n))return Object(r.format)(n,t)}return null}},function(e,t,n){"use strict";n.r(t),n.d(t,"sequelize",(function(){return u}));var r=n(13),s=n.n(r);const{PG_HOST:i,PG_USER:a,PG_PASSWORD:o,PG_DB:c}=process.env,u=new s.a(c,a,o,{host:i,dialect:"postgres",define:{timestamps:!1}}),l={},f=n(50);f.keys().forEach(e=>{const t=e.split("/").pop().split(".").shift(),n=t.charAt(0).toUpperCase()+t.slice(1);try{if("Index"===n)return;l[n]=f(e).default(u,s.a.DataTypes)}catch(e){console.error(`Cannot load model ${n}`)}}),Object.keys(l).forEach(e=>{"associate"in l[e]&&l[e].associate(l)}),t.default=l},function(e,t,n){"use strict";var r=n(14),s=n(29),i=Object.prototype.toString;function a(e){return"[object Array]"===i.call(e)}function o(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===i.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),a(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:s,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:o,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:c,isStream:function(e){return o(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:u,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,s=arguments.length;r<s;r++)u(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,s=arguments.length;r<s;r++)u(arguments[r],n);return t},extend:function(e,t,n){return u(t,(function(t,s){e[s]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t){e.exports=require("date-fns")},function(e,t){e.exports=require("lodash.get")},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return h}));var r=n(3),s=n(4),i=n.n(s);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=(e,t)=>({pse:l(e,t),rcc:f(e,t),lice:p(e,t)}),l=(e,t)=>t(e,"PSE"),f=(e,t)=>t(e,"RCC"),p=(e,t)=>t(e,"Lice"),d={pse:{procedureDurationLimit:36},lice:{types:{"LiceC -10":"Licenciement moins de 10 salariés (2 à 9 salariés)","LiceC +10":"Licenciement plus de 10 salariés (entreprise de moins de 50 salariés)"}},historicDataDefaultState:"Non communiqué",historicDataStates:{cloture:"Clôturé",BilanTermine:"Bilan terminé"}},m=({type:e="",nombre_de_ruptures:t})=>"LiceC -10"===e||t>0,b=({type:e="",date_enregistrement:t})=>!e.includes("PSE")||((e,t=i()(d,"pse.procedureDurationLimit"))=>!!e&&Object(r.differenceInMonths)(new Date,Object(r.parseISO)(e))<=t)(t),y=e=>i()(e,"type","").includes("LiceC")?o({},e,{type:i()(d,"lice.types")[e.type],rawType:e.type}):e,h=e=>e&&!e.historique_si?e:o({},e,{etat:Object.keys(i()(d,"historicDataStates")).includes(e.etat)?i()(d,"historicDataStates")[e.etat]:i()(d,"historicDataDefaultState")})},function(e,t){e.exports=require("lodash.orderby")},function(e,t,n){e.exports=n(28)},function(e,t,n){"use strict";t.a=e=>{const t={};return e.keys().forEach(n=>{const r=n.split("/").pop().split(".").shift();try{"index"!==r&&(t[r]=e(n).default)}catch(e){console.error(`Cannot load file ${r}`)}}),t}},function(e,t,n){"use strict";var r=n(25),s=n.n(r),i=n(26),a=n.n(i);t.a=({idccs:e})=>{const t=e.filter(({idcc:e,idccDefinition:t})=>"9999"!==e&&t).map(({idccDefinition:{code:e,libelle:t}})=>({code:e,libelle:t}));return{idcc:s()(t,a.a)}}},function(e,t,n){"use strict";var r=n(18);e.exports=function(e,t,n,s,i){var a=new Error(e);return r(a,t,n,s,i)}},function(e,t,n){"use strict";n.r(t);var r=n(8);const s=n(73),i=Object(r.a)(s);t.default=i},function(e,t,n){"use strict";n.r(t);var r=n(8);const s=n(83),i=Object(r.a)(s);t.default=i},function(e,t){e.exports=require("sequelize")},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";var r=n(2),s=n(34),i={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o,c={adapter:("undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)?o=n(35):"undefined"!=typeof XMLHttpRequest&&(o=n(41)),o),transformRequest:[function(e,t){return s(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(i)})),e.exports=c},function(e,t,n){"use strict";var r=n(10);e.exports=function(e,t,n){var s=n.config.validateStatus;n.status&&s&&!s(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,s){return e.config=t,n&&(e.code=n),e.request=r,e.response=s,e}},function(e,t,n){"use strict";var r=n(2);function s(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(s(t)+"="+s(e))})))})),i=a.join("&")}return i&&(e+=(-1===e.indexOf("?")?"?":"&")+i),e}},function(e,t){e.exports=require("follow-redirects")},function(e,t,n){"use strict";var r=n(2);e.exports=function(e,t){t=t||{};var n={};return r.forEach(["url","method","params","data"],(function(e){void 0!==t[e]&&(n[e]=t[e])})),r.forEach(["headers","auth","proxy"],(function(s){r.isObject(t[s])?n[s]=r.deepMerge(e[s],t[s]):void 0!==t[s]?n[s]=t[s]:r.isObject(e[s])?n[s]=r.deepMerge(e[s]):void 0!==e[s]&&(n[s]=e[s])})),r.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t){e.exports=require("@sentry/node")},function(e,t){e.exports=require("tunnel")},function(e,t){e.exports=require("lodash.uniqwith")},function(e,t){e.exports=require("lodash.isequal")},function(e,t,n){e.exports=n(100)},function(e,t,n){"use strict";var r=n(2),s=n(14),i=n(30),a=n(21);function o(e){var t=new i(e),n=s(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var c=o(n(16));c.Axios=i,c.create=function(e){return o(a(c.defaults,e))},c.Cancel=n(22),c.CancelToken=n(48),c.isCancel=n(15),c.all=function(e){return Promise.all(e)},c.spread=n(49),e.exports=c,e.exports.default=c},function(e,t){e.exports=require("is-buffer")},function(e,t,n){"use strict";var r=n(2),s=n(31),i=n(32),a=n(21);function o(e){this.defaults=e,this.interceptors={request:new s,response:new s}}o.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var t=[i,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},r.forEach(["delete","get","head","options"],(function(e){o.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){o.prototype[e]=function(t,n,s){return this.request(r.merge(s||{},{method:e,url:t,data:n}))}})),e.exports=o},function(e,t,n){"use strict";var r=n(2);function s(){this.handlers=[]}s.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},s.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},s.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=s},function(e,t,n){"use strict";var r=n(2),s=n(33),i=n(15),a=n(16),o=n(46),c=n(47);function u(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return u(e),e.baseURL&&!o(e.url)&&(e.url=c(e.baseURL,e.url)),e.headers=e.headers||{},e.data=s(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return u(e),t.data=s(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(u(e),t&&t.response&&(t.response.data=s(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(2);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t,n){"use strict";var r=n(2);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(2),s=n(17),i=n(19),a=n(36),o=n(37),c=n(20).http,u=n(20).https,l=n(38),f=n(39),p=n(40),d=n(10),m=n(18);e.exports=function(e){return new Promise((function(t,n){var b,y=function(e){clearTimeout(b),t(e)},h=function(e){clearTimeout(b),n(e)},_=e.data,g=e.headers;if(g["User-Agent"]||g["user-agent"]||(g["User-Agent"]="axios/"+p.version),_&&!r.isStream(_)){if(Buffer.isBuffer(_));else if(r.isArrayBuffer(_))_=new Buffer(new Uint8Array(_));else{if(!r.isString(_))return h(d("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));_=new Buffer(_,"utf-8")}g["Content-Length"]=_.length}var v=void 0;e.auth&&(v=(e.auth.username||"")+":"+(e.auth.password||""));var O=l.parse(e.url),S=O.protocol||"http:";if(!v&&O.auth){var E=O.auth.split(":");v=(E[0]||"")+":"+(E[1]||"")}v&&delete g.Authorization;var j="https:"===S,T=j?e.httpsAgent:e.httpAgent,R={path:i(O.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method,headers:g,agent:T,auth:v};e.socketPath?R.socketPath=e.socketPath:(R.hostname=O.hostname,R.port=O.port);var I,N=e.proxy;if(!N&&!1!==N){var w=S.slice(0,-1)+"_proxy",P=process.env[w]||process.env[w.toUpperCase()];if(P){var G=l.parse(P);if(N={host:G.hostname,port:G.port},G.auth){var x=G.auth.split(":");N.auth={username:x[0],password:x[1]}}}}if(N&&(R.hostname=N.host,R.host=N.host,R.headers.host=O.hostname+(O.port?":"+O.port:""),R.port=N.port,R.path=S+"//"+O.hostname+(O.port?":"+O.port:"")+R.path,N.auth)){var D=new Buffer(N.auth.username+":"+N.auth.password,"utf8").toString("base64");R.headers["Proxy-Authorization"]="Basic "+D}e.transport?I=e.transport:0===e.maxRedirects?I=j?o:a:(e.maxRedirects&&(R.maxRedirects=e.maxRedirects),I=j?u:c),e.maxContentLength&&e.maxContentLength>-1&&(R.maxBodyLength=e.maxContentLength);var A=I.request(R,(function(t){if(!A.aborted){var n=t;switch(t.headers["content-encoding"]){case"gzip":case"compress":case"deflate":n=n.pipe(f.createUnzip()),delete t.headers["content-encoding"]}var r=t.req||A,i={status:t.statusCode,statusText:t.statusMessage,headers:t.headers,config:e,request:r};if("stream"===e.responseType)i.data=n,s(y,h,i);else{var a=[];n.on("data",(function(t){a.push(t),e.maxContentLength>-1&&Buffer.concat(a).length>e.maxContentLength&&h(d("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,r))})),n.on("error",(function(t){A.aborted||h(m(t,e,null,r))})),n.on("end",(function(){var t=Buffer.concat(a);"arraybuffer"!==e.responseType&&(t=t.toString(e.responseEncoding)),i.data=t,s(y,h,i)}))}}}));A.on("error",(function(t){A.aborted||h(m(t,e,null,A))})),e.timeout&&(b=setTimeout((function(){A.abort(),h(d("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",A))}),e.timeout)),e.cancelToken&&e.cancelToken.promise.then((function(e){A.aborted||(A.abort(),h(e))})),r.isStream(_)?_.on("error",(function(t){h(m(t,e,null,A))})).pipe(A):A.end(_)}))}},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("zlib")},function(e){e.exports=JSON.parse('{"name":"axios","version":"0.18.0","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test && bundlesize","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://github.com/axios/axios","devDependencies":{"bundlesize":"^0.17.0","coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.0.2","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-nodeunit":"^1.0.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^20.1.0","grunt-karma":"^2.0.0","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^1.3.0","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.2.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","sinon":"^4.5.0","webpack":"^1.13.1","webpack-dev-server":"^1.14.1","url-search-params":"^0.10.0","typescript":"^2.8.1"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.4.1","is-buffer":"^2.0.2"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},function(e,t,n){"use strict";var r=n(2),s=n(17),i=n(19),a=n(42),o=n(43),c=n(10),u="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(44);e.exports=function(e){return new Promise((function(t,l){var f=e.data,p=e.headers;r.isFormData(f)&&delete p["Content-Type"];var d=new XMLHttpRequest,m="onreadystatechange",b=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in d||o(e.url)||(d=new window.XDomainRequest,m="onload",b=!0,d.onprogress=function(){},d.ontimeout=function(){}),e.auth){var y=e.auth.username||"",h=e.auth.password||"";p.Authorization="Basic "+u(y+":"+h)}if(d.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d[m]=function(){if(d&&(4===d.readyState||b)&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in d?a(d.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?d.response:d.responseText,status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:n,config:e,request:d};s(t,l,r),d=null}},d.onabort=function(){d&&(l(c("Request aborted",e,"ECONNABORTED",d)),d=null)},d.onerror=function(){l(c("Network Error",e,null,d)),d=null},d.ontimeout=function(){l(c("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var _=n(45),g=(e.withCredentials||o(e.url))&&e.xsrfCookieName?_.read(e.xsrfCookieName):void 0;g&&(p[e.xsrfHeaderName]=g)}if("setRequestHeader"in d&&r.forEach(p,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete p[t]:d.setRequestHeader(t,e)})),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){d&&(d.abort(),l(e),d=null)})),void 0===f&&(f=null),d.send(f)}))}},function(e,t,n){"use strict";var r=n(2),s=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,a={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(a[t]&&s.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},function(e,t,n){"use strict";var r=n(2);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function s(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=s(window.location.href),function(t){var n=r.isString(t)?s(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";function r(){this.message="String contains an invalid character"}r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,n,s=String(e),i="",a=0,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.charAt(0|a)||(o="=",a%1);i+=o.charAt(63&t>>8-a%1*8)){if((n=s.charCodeAt(a+=3/4))>255)throw new r;t=t<<8|n}return i}},function(e,t,n){"use strict";var r=n(2);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,s,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),r.isString(s)&&o.push("path="+s),r.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(22);function s(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}s.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},s.source=function(){var e;return{token:new s((function(t){e=t})),cancel:e}},e.exports=s},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){var r={"./accord.js":51,"./activitePartielle.js":52,"./apprentissage.js":53,"./categorieJuridique.js":54,"./contratAide.js":55,"./departement.js":56,"./dsnEff.js":57,"./entreprise.js":58,"./etablissement.js":59,"./iae.js":60,"./idcc.js":61,"./idccDefinition.js":62,"./index.js":1,"./interactionsPole3ESEER.js":63,"./interactionsPole3ESRC.js":64,"./interactionsPoleC.js":65,"./interactionsPoleT.js":66,"./naf.js":67,"./polesCompetitivite.js":68,"./rupcoEtablissement.js":69,"./rupcoProcedure.js":70,"./succession.js":71,"./ucEff.js":72};function s(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=i,e.exports=s,s.id=50},function(e,t,n){"use strict";n.r(t);t.default=(e,t)=>{const n=e.define("accord",{num_dos:t.STRING,siret:t.STRING,dt_sign:t.STRING,epargne:t.INTEGER,remuneration:t.INTEGER,temps_travail:t.INTEGER,conditions_travail:t.INTEGER,emploi:t.INTEGER,egalite_pro:t.INTEGER,classifications:t.INTEGER,formation:t.INTEGER,protection_sociale:t.INTEGER,droit_syndical:t.INTEGER,autres:t.INTEGER,nouvelles_technologies:t.INTEGER},{tableName:"etablissements_accords"});return n.associate=e=>{n.hasOne(e.Etablissement,{foreignKey:"siret",sourceKey:"siret"})},n}},function(e,t,n){"use strict";n.r(t);t.default=(e,t)=>e.define("activitePartielle",{siret:t.STRING,num_convention:t.STRING,date_decision:t.STRING,num_avenant:t.INTEGER,da_init:t.STRING,nb_h_auto_avn:t.FLOAT,nb_h_auto_cum:t.FLOAT,nb_h_conso_cum:t.FLOAT,cause:t.STRING},{tableName:"etablissements_activite_partielle"})},function(e,t,n){"use strict";n.r(t);t.default=(e,t)=>e.define("apprentissage",{siret:t.STRING,type_contrat:t.INTEGER,numero_enregistrement:t.STRING,date_debut:t.STRING,date_rupture:t.STRING},{tableName:"etablissements_apprentissage"})},function(e,t,n){"use strict";n.r(t);t.default=(e,t)=>e.define("categorie_juridique",{code:t.STRING,libelle:t.STRING},{tableName:"categorie_juridique"})},function(e,t,n){"use strict";n.r(t);t.default=(e,t)=>e.define("contratAide",{siret:t.STRING,CA_stock_12_2018:t.INTEGER,CA_contrat_2018:t.INTEGER,CA_entree_2018:t.INTEGER,contrat_aide:t.BOOLEAN},{tableName:"etablissements_contrats_aides"})},function(e,t,n){"use strict";n.r(t);t.default=(e,t)=>e.define("departements",{code:t.STRING,nom:t.STRING})},function(e,t,n){"use strict";n.r(t);t.default=(e,t)=>e.define("dsnEff",{siret:t.STRING,eff:t.INTEGER,mois:t.STRING,hommes:t.INTEGER,femmes:t.INTEGER,cdd:t.INTEGER,cdi:t.INTEGER,cdi_inter:t.INTEGER,inter_mission:t.INTEGER,interim:t.INTEGER,date_maj:t.STRING},{tableName:"etablissements_dsn_eff"})},function(e,t,n){"use strict";n.r(t);const r=[{type:"hasMany",model:"ActivitePartielle",entity:"activitePartielles"},{type:"hasMany",model:"Apprentissage",entity:"apprentissages"}];t.default=(e,t)=>{const n=e.define("entreprise",{siren:{type:t.STRING,primaryKey:!0},statutdiffusionunitelegale:t.STRING,unitepurgeeunitelegale:t.STRING,datecreationunitelegale:t.DATEONLY,sigleunitelegale:t.STRING,sexeunitelegale:t.STRING,prenom1unitelegale:t.STRING,prenom2unitelegale:t.STRING,prenom3unitelegale:t.STRING,prenom4unitelegale:t.STRING,pseudonymeunitelegale:t.STRING,identifiantassociationunitelegale:t.STRING,trancheeffectifsunitelegale:t.STRING,anneeeffectifsunitelegale:t.STRING,datederniertraitementunitelegale:t.DATEONLY,nombreperiodesunitelegale:t.INTEGER,categorieentreprise:t.STRING,anneecategorieentreprise:t.STRING,datedebut:t.DATEONLY,etatadministratifunitelegale:t.STRING,nomunitelegale:t.STRING,nomusageunitelegale:t.STRING,denominationunitelegale:t.STRING,denominationusuelle1unitelegale:t.STRING,denominationusuelle2unitelegale:t.STRING,denominationusuelle3unitelegale:t.STRING,categoriejuridiqueunitelegale:t.STRING,activiteprincipaleunitelegale:t.STRING,nomenclatureactiviteprincipaleunitelegale:t.STRING,nicsiegeunitelegale:t.STRING,economiesocialesolidaireunitelegale:t.STRING,caractereemployeurunitelegale:t.STRING,prenomusuelunitelegale:t.STRING},{tableName:"entreprises"});return n.associatedSources=r,n.associate=e=>{n.belongsTo(e.Naf,{foreignKey:"activiteprincipaleunitelegale",targetKey:"code"}),n.belongsTo(e.CategorieJuridique,{foreignKey:"categoriejuridiqueunitelegale",targetKey:"code"}),n.hasMany(e.RupcoEtablissement,{foreignKey:"siren",sourceKey:"siren"}),n.hasMany(e.Idcc,{foreignKey:"siren",sourceKey:"siren"}),n.hasMany(e.InteractionsPole3ESEER,{foreignKey:"siren",sourceKey:"siren"}),n.hasMany(e.InteractionsPole3ESRC,{foreignKey:"siren",sourceKey:"siren"}),n.hasMany(e.InteractionsPoleC,{foreignKey:"siren",sourceKey:"siren"}),n.hasMany(e.InteractionsPoleT,{foreignKey:"siren",sourceKey:"siren"}),n.hasMany(e.Accord,{foreignKey:"siren",sourceKey:"siren"}),r.forEach(({type:t,model:r})=>{n[t](e[r],{foreignKey:"siren",sourceKey:"siren"})})},n}},function(e,t,n){"use strict";n.r(t);const r=[{type:"hasMany",model:"Accord"},{type:"hasMany",model:"ActivitePartielle"},{type:"hasMany",model:"Apprentissage"},{type:"hasOne",model:"ContratAide"},{type:"hasOne",model:"DsnEff"},{type:"hasOne",model:"Iae"},{type:"hasMany",model:"InteractionsPole3ESEER"},{type:"hasMany",model:"InteractionsPole3ESRC"},{type:"hasMany",model:"InteractionsPoleC"},{type:"hasMany",model:"InteractionsPoleT"},{type:"hasMany",model:"PolesCompetitivite"},{type:"hasOne",model:"UcEff"}];t.default=(e,t)=>{const n=e.define("etablissement",{siret:{type:t.STRING,primaryKey:!0},siren:t.STRING,nic:t.STRING,statutdiffusionetablissement:t.STRING,datecreationetablissement:t.DATEONLY,trancheeffectifsetablissement:t.STRING,anneeeffectifsetablissement:t.STRING,activiteprincipaleregistremetiersetablissement:t.STRING,datederniertraitementetablissement:t.DATEONLY,etablissementsiege:t.STRING,nombreperiodesetablissement:t.INTEGER,complementadresseetablissement:t.STRING,numerovoieetablissement:t.STRING,indicerepetitionetablissement:t.STRING,typevoieetablissement:t.STRING,libellevoieetablissement:t.STRING,codepostaletablissement:t.STRING,libellecommuneetablissement:t.STRING,libellecommuneetrangeretablissement:t.STRING,distributionspecialeetablissement:t.STRING,codecommuneetablissement:t.STRING,codecedexetablissement:t.STRING,libellecedexetablissement:t.STRING,codepaysetrangeretablissement:t.STRING,libellepaysetrangeretablissement:t.STRING,complementadresse2etablissement:t.STRING,numerovoie2etablissement:t.STRING,indicerepetition2etablissement:t.STRING,typevoie2etablissement:t.STRING,libellevoie2etablissement:t.STRING,codepostal2etablissement:t.STRING,libellecommune2etablissement:t.STRING,libellecommuneetranger2etablissement:t.STRING,distributionspeciale2etablissement:t.STRING,codecommune2etablissement:t.STRING,codecedex2etablissement:t.STRING,libellecedex2etablissement:t.STRING,codepaysetranger2etablissement:t.STRING,libellepaysetranger2etablissement:t.STRING,datedebut:t.DATEONLY,etatadministratifetablissement:t.STRING,enseigne1etablissement:t.STRING,enseigne2etablissement:t.STRING,enseigne3etablissement:t.STRING,denominationusuelleetablissement:t.STRING,activiteprincipaleetablissement:t.STRING,nomenclatureactiviteprincipaleetablissement:t.STRING,caractereemployeuretablissement:t.STRING},{tableName:"etablissements"});return n.associatedSources=r,n.associate=e=>{n.belongsTo(e.Naf,{foreignKey:"activiteprincipaleetablissement",targetKey:"code"}),n.belongsTo(e.Entreprise,{foreignKey:"siren",targetKey:"siren"}),n.hasMany(e.RupcoEtablissement,{foreignKey:"siret",sourceKey:"siret"}),n.hasMany(e.Idcc,{foreignKey:"siret",sourceKey:"siret"}),r.forEach(({type:t,model:r})=>{n[t](e[r],{foreignKey:"siret",sourceKey:"siret"})}),n.Successeur=n.hasOne(e.Succession,{as:"successeur",foreignKey:"siretetablissementpredecesseur",targetKey:"siret"}),n.Predecesseur=n.hasOne(e.Succession,{as:"predecesseur",foreignKey:"siretetablissementsuccesseur",targetKey:"siret"})},n}},function(e,t,n){"use strict";n.r(t);t.default=(e,t)=>e.define("iae",{siret:t.STRING,EI:t.BOOLEAN,ACI:t.BOOLEAN,AI:t.BOOLEAN,ETTI:t.BOOLEAN,EI_SI2018:t.INTEGER,ACI_SI2018:t.INTEGER,AI_SI2018:t.INTEGER,ETTI_SI2018:t.INTEGER,EI_ETP2018:t.FLOAT,ACI_ETP2018:t.FLOAT,AI_ETP2018:t.FLOAT,ETTI_ETP2018:t.FLOAT},{tableName:"etablissements_iae"})},function(e,t,n){"use strict";n.r(t);t.default=(e,t)=>{const n=e.define("idcc",{siret:t.STRING,idcc:t.STRING,date_maj:t.STRING,mois:t.STRING},{tableName:"etablissements_idcc"});return n.associate=e=>{n.hasOne(e.IdccDefinition,{foreignKey:"code",sourceKey:"idcc"})},n}},function(e,t,n){"use strict";n.r(t);t.default=(e,t)=>e.define("idccDefinition",{code:t.STRING,libelle:t.STRING},{tableName:"idcc"})},function(e,t,n){"use strict";n.r(t);t.default=(e,t)=>{const n=e.define("interactionsPole3ESEER",{siret:t.STRING,date_visite:t.STRING,region:t.STRING,inspecteurs:t.STRING,filieres:t.STRING,type_suivi:t.STRING,suivi_eti:t.STRING},{tableName:"interactions_pole_3e"});return n.associate=e=>{n.hasOne(e.Etablissement,{foreignKey:"siret",sourceKey:"siret"})},n}},function(e,t,n){"use strict";n.r(t);t.default=(e,t)=>{const n=e.define("interactionsPole3ESRC",{siret:t.STRING,region:t.STRING,numero_dossier:t.STRING,type_controle:t.STRING,date:t.STRING},{tableName:"interactions_pole_3e_src"});return n.associate=e=>{n.hasOne(e.Etablissement,{foreignKey:"siret",sourceKey:"siret"})},n}},function(e,t,n){"use strict";n.r(t);t.default=(e,t)=>{const n=e.define("interactionsPoleC",{siret:t.STRING,annee:t.STRING,mois:t.STRING,jour:t.STRING,suite:t.BOOLEAN,unite:t.STRING,messagerie:t.STRING,date:t.STRING},{tableName:"interactions_pole_c"});return n.associate=e=>{n.hasOne(e.Etablissement,{foreignKey:"siret",sourceKey:"siret"})},n}},function(e,t,n){"use strict";n.r(t);t.default=(e,t)=>{const n=e.define("interactionsPoleT",{siret:t.STRING,type_intervention:t.STRING,date:t.STRING,realise_pour:t.STRING,action_sur:t.STRING,intervenant:t.STRING},{tableName:"interactions_pole_t"});return n.associate=e=>{n.hasOne(e.Etablissement,{foreignKey:"siret",sourceKey:"siret"})},n}},function(e,t,n){"use strict";n.r(t);t.default=(e,t)=>e.define("naf",{code:t.STRING,libelle:t.STRING,nomenclature:t.STRING,recherche:t.BOOLEAN},{tableName:"naf"})},function(e,t,n){"use strict";n.r(t);t.default=(e,t)=>e.define("polesCompetitivite",{siret:t.STRING,designation_pole:t.STRING},{tableName:"poles_competitivite"})},function(e,t,n){"use strict";n.r(t);t.default=(e,t)=>{const n=e.define("rupcoEtablissement",{siret:t.STRING,numero:t.INTEGER,type:t.STRING,date_enregistrement:t.STRING,siren:t.STRING,date_jugement:t.STRING,situation_juridique:t.STRING,siren_etablissement:t.STRING,effectif_etablissement:t.INTEGER,nombre_de_ruptures_de_contrats_en_debut_de_procedure:t.INTEGER,nombre_de_ruptures_de_contrats_en_fin_de_procedure:t.INTEGER,historique_si:t.BOOLEAN},{tableName:"rupco_etablissements"});return n.associate=e=>{n.hasOne(e.RupcoProcedure,{foreignKey:"numero",sourceKey:"numero"})},n}},function(e,t,n){"use strict";n.r(t);t.default=(e,t)=>e.define("rupcoProcedure",{numero:t.INTEGER,type:t.STRING,date_enregistrement:t.STRING,etat:t.STRING,siren:t.STRING,effectif_entreprise:t.INTEGER,effectif_groupe:t.INTEGER,nom_groupe:t.STRING,date_jugement:t.STRING,situation_juridique:t.STRING,historique_si:t.BOOLEAN},{tableName:"rupco_procedures"})},function(e,t,n){"use strict";n.r(t);t.default=(e,t)=>e.define("succession",{siretetablissementpredecesseur:t.STRING,siretetablissementsuccesseur:t.STRING,dateliensuccession:t.DATEONLY,transfertsiege:t.BOOLEAN,continuiteeconomique:t.BOOLEAN,datederniertraitementliensuccession:t.DATE},{tableName:"etablissements_successions"})},function(e,t,n){"use strict";n.r(t);t.default=(e,t)=>e.define("ucEff",{siret:t.STRING,cod_section:t.STRING,nme_ddtefp3:t.STRING,nme_region:t.STRING,dereffphy:t.INTEGER,date_effphy_et:t.STRING,source_effphy_et:t.INTEGER},{tableName:"etablissements_uc_eff"})},function(e,t,n){var r={"./accords.js":74,"./activitePartielles.js":75,"./apprentissages.js":76,"./idccs.js":77,"./index.js":11,"./interactionsPole3ESEERs.js":78,"./interactionsPole3ESRCs.js":79,"./interactionsPoleCs.js":80,"./interactionsPoleTs.js":81,"./rupcoEtablissements.js":82};function s(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=i,e.exports=s,s.id=73},function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=({accords:e})=>({accords:e.reduce((e,{siret:t,dt_sign:n,etablissement:s})=>(n=Object(r.a)(n),Object.prototype.hasOwnProperty.call(e,t)||(e[t]={count:0,lastDate:null,etablissement:{etat_etablissement:null==s?void 0:s.etatadministratifetablissement,categorie_etablissement:"true"===(null==s?void 0:s.etablissementsiege)?"Siège social":"Établissement"}}),e[t].count+=1,(!e[t].lastDate||e[t].lastDate<n)&&(e[t].lastDate=n),e),{})})},function(e,t,n){"use strict";n.r(t);var r=n(6),s=n.n(r),i=n(0);t.default=({activitePartielles:e})=>{const t=s()(e,["dataValues.siret","dataValues.date_decision","dataValues.num_avenant"],["asc","asc","asc"]).reduce((e,{siret:t,num_convention:n,date_decision:r,nb_h_auto_cum:s,nb_h_conso_cum:a,cause:o})=>(Object.prototype.hasOwnProperty.call(e,t)||(e[t]={}),Object.prototype.hasOwnProperty.call(e,n)?(e[t][n].nbAvenants++,e[t][n].nbHeuresAutorisees=s,e):(e[t][n]={numConvention:n,nbAvenants:0,date:Object(i.a)(r),nbHeuresAutorisees:s,nbHeuresConsommees:a,motif:o},e)),{});return{activite_partielle:Object.entries(t).map(([e,t])=>{const{nbHeuresAutorisees:n,nbHeuresConsommees:r,date:s}=Object.values(t).reduce((e,{nbHeuresAutorisees:t,nbHeuresConsommees:n,date:r})=>(e.nbHeuresAutorisees+=parseFloat(t),e.nbHeuresConsommees+=parseFloat(n),(!e.date||e.date<r)&&(e.date=r),e),{nbHeuresAutorisees:0,nbHeuresConsommees:0,date:null});return{siret:e,nbHeuresAutorisees:n,nbHeuresConsommees:r,date:s}})}}},function(e,t,n){"use strict";n.r(t);var r=n(0);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=({apprentissages:e})=>{const t=(new Date).getFullYear(),n={[t]:0,[t-1]:0,[t-2]:0},s=e.reduce((e,{siret:t,date_debut:s})=>{const a=Object(r.a)(s,"yyyy");return a&&Object.prototype.hasOwnProperty.call(n,a)?(Object.prototype.hasOwnProperty.call(e,t)||(e[t]={siret:t,signes:i({},n)}),e[t].signes[a]++,e):e},{});return{apprentissage:Object.values(s)}}},function(e,t,n){"use strict";n.r(t);var r=n(9);t.default=r.a},function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=({interactionsPole3ESEERs:e})=>({interactions_3E_SEER:e.map(e=>{var t,n,s;return{siret:e.siret,date:Object(r.a)(e.date_visite),pole:"3E_SEER",unite:`Service Entreprise ${e.region&&e.region.trim()}`,type:e.type_suivi&&e.type_suivi.trim(),agent:e.inspecteurs&&e.inspecteurs.trim(),filiere:e.filieres&&e.filieres.trim(),eti_pepite:e.suivi_eti&&e.suivi_eti.trim(),etablissement:{etat_etablissement:null==e||null===(t=e.etablissement)||void 0===t?void 0:t.etatadministratifetablissement,adresse_composant:{code_postal:null==e||null===(n=e.etablissement)||void 0===n?void 0:n.codepostaletablissement,localite:null==e||null===(s=e.etablissement)||void 0===s?void 0:s.libellecommuneetablissement}}}})})},function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=({interactionsPole3ESRCs:e})=>({interactions_3E_SEER:e.map(e=>{var t,n,s;return{siret:e.siret,date:Object(r.a)(e.date),pole:"3E_SRC",unite:`SRC ${e.region__name&&e.region__name.trim()}`,type:e.type_controle&&e.type_controle.trim(),agent:null,etablissement:{etat_etablissement:null==e||null===(t=e.etablissement)||void 0===t?void 0:t.etatadministratifetablissement,adresse_composant:{code_postal:null==e||null===(n=e.etablissement)||void 0===n?void 0:n.codepostaletablissement,localite:null==e||null===(s=e.etablissement)||void 0===s?void 0:s.libellecommuneetablissement}}}})})},function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=({interactionsPoleCs:e})=>({interactions_C:e.map(({siret:e,unite:t,date:n,etablissement:s})=>({siret:e,pole:"C",unite:t&&t.trim(),type:null,date:Object(r.a)(n),agent:null,note:null,etablissement:{etat_etablissement:null==s?void 0:s.etatadministratifetablissement,adresse_composant:{code_postal:null==s?void 0:s.codepostaletablissement,localite:null==s?void 0:s.libellecommuneetablissement}}}))})},function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=({interactionsPoleTs:e})=>({interactions_T:e.map(e=>{var t,n,s;return{siret:e.siret,pole:"T",unite:e.realise_pour&&e.realise_pour.trim(),type:e.type_intervention&&e.type_intervention.trim(),date:Object(r.a)(e.date),agent:e.intervenant&&e.intervenant.trim(),note:e.action_sur&&e.action_sur.trim(),etablissement:{etat_etablissement:null==e||null===(t=e.etablissement)||void 0===t?void 0:t.etatadministratifetablissement,adresse_composant:{code_postal:null==e||null===(n=e.etablissement)||void 0===n?void 0:n.codepostaletablissement,localite:null==e||null===(s=e.etablissement)||void 0===s?void 0:s.libellecommuneetablissement}}}})})},function(e,t,n){"use strict";n.r(t);var r=n(4),s=n.n(r),i=n(5),a=n(0);t.default=({rupcoEtablissements:e})=>Object(i.a)(e,o);const o=(e,t)=>{const n=e.filter(({type:e})=>e.startsWith(t));return c(n)},c=e=>{const t=e.reduce((e,{date_enregistrement:t,type:n,numero:r,situation_juridique:i,date_jugement:o,siret:c,historique_si:u,rupcoProcedure:l,nombre_de_ruptures_de_contrats_en_debut_de_procedure:f,nombre_de_ruptures_de_contrats_en_fin_de_procedure:p})=>{e[r]||(e[r]={date_enregistrement:Object(a.a)(t),type:n,numero:r,etat:s()(l,"etat"),situation_juridique:i,date_jugement:Object(a.a)(o),nombre_de_ruptures:0,historique_si:u,etablissements:[]});const d=+p||+f||0;return("LiceC -10"===n||d>0)&&(e[r].nombre_de_ruptures+=d,e[r].etablissements.push({siret:c,nombre_de_ruptures:d})),e},{});return Object.values(t).filter(e=>Object(i.b)(e)&&Object(i.c)(e)).map(e=>Object(i.e)(Object(i.d)(e)))}},function(e,t,n){var r={"./accords.js":84,"./activitePartielles.js":85,"./apprentissages.js":86,"./contratAide.js":87,"./dsnEff.js":88,"./iae.js":89,"./idccs.js":90,"./index.js":12,"./interactionsPole3ESEERs.js":91,"./interactionsPole3ESRCs.js":92,"./interactionsPoleCs.js":93,"./interactionsPoleTs.js":94,"./polesCompetitivites.js":95,"./predecesseur.js":96,"./rupcoEtablissements.js":97,"./successeur.js":98,"./ucEff.js":99};function s(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=i,e.exports=s,s.id=83},function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=({accords:e})=>{const t=e.reduce((e,t)=>(t.dt_sign=Object(r.a)(t.dt_sign),Object.entries(t.dataValues).forEach(([n,r])=>{Object.prototype.hasOwnProperty.call(e,n)&&"number"==typeof r&&r>0&&(e[n].count+=1,(!e[n].lastDate||e[n].lastDate<t.dt_sign)&&(e[n].lastDate=t.dt_sign))}),e),{autres:{count:0,lastDate:null},classifications:{count:0,lastDate:null},conditions_travail:{count:0,lastDate:null},droit_syndical:{count:0,lastDate:null},egalite_pro:{count:0,lastDate:null},emploi:{count:0,lastDate:null},epargne:{count:0,lastDate:null},formation:{count:0,lastDate:null},nouvelles_technologies:{count:0,lastDate:null},protection_sociale:{count:0,lastDate:null},remuneration:{count:0,lastDate:null},temps_travail:{count:0,lastDate:null}});return t.total={count:e.length,lastDate:Object.values(t).reduce((e,{lastDate:t})=>!e||e<t?t:e,null)},{accords:t}}},function(e,t,n){"use strict";n.r(t);var r=n(6),s=n.n(r),i=n(0);t.default=({activitePartielles:e})=>{const t=s()(e,["dataValues.date_decision","dataValues.num_avenant"],["asc","asc"]).reduce((e,{num_convention:t,date_decision:n,nb_h_auto_cum:r,nb_h_conso_cum:s,cause:a})=>Object.prototype.hasOwnProperty.call(e,t)?(e[t].nbAvenants++,e[t].nbHeuresAutorisees=r,e):(e[t]={numConvention:t,nbAvenants:0,date:Object(i.a)(n),nbHeuresAutorisees:r,nbHeuresConsommees:s,motif:a},e),{});return{activite_partielle:Object.values(t)}}},function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=({apprentissages:e})=>{const t=(new Date).getFullYear(),n={[t]:{signes:0,rompus:0},[t-1]:{signes:0,rompus:0},[t-2]:{signes:0,rompus:0}};return{apprentissage:e.reduce((e,{date_debut:t,date_rupture:n})=>{const s=Object(r.a)(t,"yyyy"),i=n&&Object(r.a)(n,"yyyy");return s&&Object.prototype.hasOwnProperty.call(e,s)&&e[s].signes++,i&&Object.prototype.hasOwnProperty.call(e,i)&&e[i].rompus++,e},n)}}},function(e,t,n){"use strict";n.r(t),t.default=({contratAide:e})=>({contrat_aide:!!e.contrat_aide,contrat_aide_salaries_n1:e.CA_stock_12_2018,contrat_aide_embauches_n1:e.CA_entree_2018,contrat_aide_alternance_n1:null})},function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=({dsnEff:e})=>({dernier_effectif_physique:e.eff,date_dernier_effectif_physique:Object(r.a)(e.date_maj),dsnEffectif:{total:e.eff,hommes:e.hommes,femmes:e.femmes,cdd:e.cdd,cdi:e.cdi,cdi_inter:e.cdi_inter,inter_mission:e.inter_mission,interim:e.interim,date:Object(r.a)(e.date_maj)}})},function(e,t,n){"use strict";n.r(t),t.default=({iae:e})=>({agrements_iae:{ei:{agrement:e.EI,salariesInsertion:e.EI_SI2018,etp:e.EI_ETP2018},aci:{agrement:e.ACI,salariesInsertion:e.ACI_SI2018,etp:e.ACI_ETP2018},ai:{agrement:e.AI,salariesInsertion:e.AI_SI2018,etp:e.AI_ETP2018},etti:{agrement:e.ETTI,salariesInsertion:e.ETTI_SI2018,etp:e.ETTI_ETP2018}}})},function(e,t,n){"use strict";n.r(t);var r=n(9);t.default=r.a},function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=({interactionsPole3ESEERs:e})=>({interactions_3E_SEER:e.map(e=>({date:Object(r.a)(e.date_visite),pole:"3E_SEER",unite:`Service Entreprise ${e.region&&e.region.trim()}`,type:e.type_suivi&&e.type_suivi.trim(),agent:e.inspecteurs&&e.inspecteurs.trim(),filiere:e.filieres&&e.filieres.trim(),eti_pepite:e.suivi_eti&&e.suivi_eti.trim()}))})},function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=({interactionsPole3ESRCs:e})=>({interactions_3E_SRC:e.map(e=>({date:Object(r.a)(e.date),pole:"3E_SRC",unite:`SRC ${e.region__name&&e.region__name.trim()}`,type:e.type_controle&&e.type_controle.trim(),agent:null}))})},function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=({interactionsPoleCs:e})=>({interactions_C:e.map(({unite:e,date:t})=>({pole:"C",unite:e&&e.trim(),type:null,date:Object(r.a)(t),agent:null,note:null}))})},function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=({interactionsPoleTs:e})=>({interactions_T:e.map(e=>({pole:"T",unite:e.realise_pour&&e.realise_pour.trim(),type:e.type_intervention&&e.type_intervention.trim(),date:Object(r.a)(e.date),agent:e.intervenant&&e.intervenant.trim(),note:e.action_sur&&e.action_sur.trim()}))})},function(e,t,n){"use strict";n.r(t),t.default=({polesCompetitivites:e})=>({pole_competitivite:e.map(e=>e.designation_pole)})},function(e,t,n){"use strict";n.r(t),t.default=({predecesseur:{siretetablissementpredecesseur:e,dateliensuccession:t,transfertsiege:n}})=>({predecesseur:{siret:e,date_transfert:t,transfert_siege:n}})},function(e,t,n){"use strict";n.r(t);var r=n(4),s=n.n(r),i=n(5),a=n(0);t.default=({rupcoEtablissements:e})=>Object(i.a)(e,o);const o=(e,t)=>{const n=e.filter(({type:e})=>e.startsWith(t));return c(n)},c=e=>e.map(({date_enregistrement:e,type:t,numero:n,historique_si:r,rupcoProcedure:i,dataValues:{nombre_de_ruptures_de_contrats_en_debut_de_:o,nombre_de_ruptures_de_contrats_en_fin_de_pr:c}})=>({date_enregistrement:Object(a.a)(e),type:t,numero:n,etat:s()(i,"etat"),nombre_de_ruptures:+c||+o||0,historique_si:r})).filter(e=>Object(i.b)(e)&&Object(i.c)(e)).map(e=>Object(i.e)(Object(i.d)(e)))},function(e,t,n){"use strict";n.r(t),t.default=({successeur:{siretetablissementsuccesseur:e,dateliensuccession:t,transfertsiege:n}})=>({successeur:{siret:e,date_transfert:t,transfert_siege:n}})},function(e,t,n){"use strict";n.r(t),t.default=({ucEff:e})=>({unite_controle_competente:r(e.cod_section,e.nme_ddtefp3)});const r=(e,t)=>{let n=e;return t&&(n+=` (${t})`),n}},function(e,t,n){"use strict";n.r(t),n.d(t,"Entreprise",(function(){return be})),n.d(t,"Etablissement",(function(){return ve})),n.d(t,"DataSource",(function(){return p})),n.d(t,"_",(function(){return Te})),n.d(t,"isSIRET",(function(){return Re})),n.d(t,"isSIREN",(function(){return Ie}));var r=n(23);function s(e){this.message=`Invalid SIRET or SIREN. ${e}`}s.prototype=Object.create(Error.prototype,{constructor:{value:s},name:{value:"InvalidIdentifierError"},stack:{get:function(){return(new Error).stack}}});var i=s;function a(e){this.message=`The source ${e} is not found`}a.prototype=Object.create(Error.prototype,{constructor:{value:a},name:{value:"NotFoundSourceError"},stack:{get:function(){return(new Error).stack}}});var o=a;function c(e,t=!1){if(!/^[0-9]{9}$/.test(e))return!1;if(!t)return!0;return e.split("").reduce((e,t,n)=>(t=+t,n%2==0?e+t:e+((t*=2)>9?t-9:t)),0)%10==0}function u(e,t=!1){if(!/^[0-9]{14}$/.test(e))return!1;if(!t)return!0;return e.split("").reduce((e,t,n)=>(t=+t,n%2!=0?e+t:e+((t*=2)>9?t-9:t)),0)%10==0}function l(e){const t=(new Error).stack.split("\n")[2].replace(" at ","");this.message=`The method ${t} isn't implemented.`,e&&(this.message+=` Message: "${e}".`);let n=this.message;for(;n.indexOf("  ")>-1;)n=n.replace("  "," ");this.message=n}l.prototype=Object.create(Error.prototype,{constructor:{value:l},name:{value:"NotImplementedError"},stack:{get:function(){return(new Error).stack}}});var f=l;class p{async getSIRET(){throw new f}async getSIREN(){throw new f}getSIRETCheck(){throw new f}getSIRENCheck(){throw new f}}var d={convertDate:e=>(e>1e11&&(e/=1e3),+e&&new Date(1e3*e)||void 0),getCleanAddress:e=>`\n    ${e.numero_voie||""} ${e.type_voie||""} ${e.nom_voie||""}\n    ${e.complement_adresse||""} ${e.code_postal||""}\n    ${e.localite||""}\n    `.trim().split("\n").map(e=>e.trim().replace(/\s+/g," ")).filter(e=>e.length>0).join("\n"),isEmpty:e=>null==e||"object"==typeof e&&0===Object.keys(e).length||"string"==typeof e&&0===e.trim().length,requestAPI:async(e,t,n={})=>{try{const r=await e.get(t,n);if(r&&r.data){const e=r.request&&r.request.res&&r.request.res.responseUrl;return console.log(`Request successed for ${e}`),r.data||{}}}catch(e){if(e&&"request"in e){let{message:t,request:n,response:r,config:s}=e;"object"!=typeof s&&(s={}),"object"!=typeof n.res&&(n.res={}),"object"!=typeof r&&(r={}),r.data||(r.data="(no data)");let{responseUrl:i}=n.res;i=i||n._currentUrl||("object"==typeof n._currentRequest||"string"==typeof n.path?`${(""+(s.baseURL||"(unknown host)")).replace(/^(https?:\/\/[^/]*).*$/i,"$1")}${n._currentRequest&&n._currentRequest.path||n.path}`:"unknown url");const a="object"==typeof r.data?JSON.stringify(r.data,!0,2):r.data,o=JSON.stringify(s.proxy||!1,!0,2);console.error(`\n--\n⚠️  ${t}\n${i}\nProxy: ${o}\n--\n${a}\n--\n`.trim())}else console.error(e)}return Promise.resolve({})}},m=n(4),b=n.n(m),y=async(e,t)=>{const n={};if("object"!=typeof e)return n;for(const r of t){const t="object"==typeof r?r.in:r,s="object"==typeof r?r.out:r,i="object"==typeof r&&r.defaultValue?r.defaultValue:void 0;let a=b()(e,t,i);r.callback&&(a=await r.callback(a,e)),n[s]="boolean"==typeof a?a:a||void 0}return n};var h=async(e,t,n)=>await d.requestAPI(t,`etablissements/${e}`,n).then(e=>{const t=["siret","siege_social",{in:"siege_social",out:"categorie_etablissement",callback:e=>d.isEmpty(e)?void 0:e?"Siège social":"Établissement"},"enseigne","naf","libelle_naf",{in:"date_creation_etablissement",out:"date_creation",callback:e=>d.convertDate(e)},{in:"region_implantation.code",out:"code_region",callback:e=>e&&+e},{in:"region_implantation.value",out:"region"},{in:"tranche_effectif_salarie_etablissement",out:"etablissement_employeur",callback:e=>e&&+e.a>0},{in:"tranche_effectif_salarie_etablissement.intitule",out:"tranche_effectif_insee"},{in:"tranche_effectif_salarie_etablissement.date_reference",out:"annee_tranche_effectif_insee",callback:e=>e&&+e},{in:"adresse",out:"adresse",callback:e=>"object"==typeof e?d.getCleanAddress(e):void 0},{in:"adresse",out:"adresse_composant"},{in:"adresse",out:"departement",callback:e=>"object"==typeof e?"string"==typeof e.code_insee_localite&&e.code_insee_localite.length>1&&e.code_insee_localite.substr(0,2):void 0}];return e&&e.etablissement?y(e.etablissement,t):{}});var _=async(e,t,n)=>await d.requestAPI(t,`exercices/${e}`,n).then(e=>{if(e&&Array.isArray(e.exercices)){const t={};return e.exercices.forEach(e=>{t[d.convertDate(e.date_fin_exercice_timestamp).toISOString()]=+e.ca||null}),{donnees_ecofi:t}}});var g=async(e,t,n)=>await d.requestAPI(t,`etablissements/${e}/predecesseur`,n).then(e=>{if(e&&e.predecesseur){const t=e.predecesseur;if(t)return{predecesseur:{siret:t.predecesseur_siret,date_transfert:d.convertDate(t.predecesseur_date_etablissement)}}}});var v=async(e,t,n)=>await d.requestAPI(t,`etablissements/${e}/successeur`,n).then(e=>{if(e&&e.successeur){const t=e.successeur;if(t)return{successeur:{siret:t.successeur_siret,date_transfert:d.convertDate(t.successeur_date_etablissement),transfert_siege:!!t.transfert_siege}}}}),O=n(6),S=n.n(O),E=n(3);const j=e=>S()(e,["annee","mois"],["desc","desc"]).slice(0,3),T=(e,t,n,r)=>{const s=new Date,i=[],a=[];for(let o=1;o<=5;o++){const c=Object(E.subMonths)(s,o),u=Object(E.format)(c,"yyyy"),l=Object(E.format)(c,"MM"),f=d.requestAPI(e,`effectifs_mensuels_acoss_covid/${u}/${l}/${n}/${r}`,t).then(e=>{if(!(null==e?void 0:e.effectifs_mensuels))return null;a.push(e)});i.push(f)}return Promise.all(i).then(()=>({effectifMensuelEtp:j(a)})).catch(()=>({effectifMensuelEtp:j(a)}))};var R={getEtablissement:h,exercices:_,predecesseur:g,successeur:v,effectifsMensuelEtp:async(e,t,n)=>await T(t,n,"etablissement",e)};var I={getEntreprise:async(e,t,n)=>await d.requestAPI(t,`entreprises/${e}`,n).then(e=>{const t=["categorie_entreprise","siren",{in:"raison_sociale",out:"raison_sociale",callback:e=>e&&e.replace("*/"," ").replace("/","").trim()},"nom_commercial","nom","prenom","siret_siege_social","capital_social","numero_tva_intracommunautaire",{in:"forme_juridique",out:"categorie_juridique"},{in:"forme_juridique_code",out:"categorie_juridique_code"},{in:"naf_entreprise",out:"naf"},{in:"libelle_naf_entreprise",out:"libelle_naf"},{in:"tranche_effectif_salarie_entreprise.date_reference",out:"annee_tranche_effectif"},{in:"tranche_effectif_salarie_entreprise.intitule",out:"tranche_effectif"},{in:"tranche_effectif_salarie_entreprise",out:"entreprise_employeur",callback:e=>e&&+e.a>0},{in:"mandataires_sociaux",out:"mandataires_sociaux",callback:e=>Array.isArray(e)?e.map(e=>({nom:e.nom,prenom:e.prenom,fonction:e.fonction,raison_sociale:e.raison_sociale})):null},{in:"date_creation",out:"date_de_creation",callback:e=>d.convertDate(e)},{in:"date_radiation",out:"date_de_radiation",callback:e=>d.convertDate(e)}];return e&&e.entreprise?y(e.entreprise,t):{}}),infogreffe_rcs:async(e,t,n)=>await d.requestAPI(t,`extraits_rcs_infogreffe/${e}`,n).then(e=>{if("object"!=typeof e||!e.siren)return{};const t={rcs_date_immatriculation:e.date_immatriculation};return Array.isArray(e.observations)&&e.observations.length&&(t.rcs_observations=e.observations.map(({libelle:e,date:t})=>({date:t,libelle:e.trim()}))),t}),effectifsMensuelEtp:async(e,t,n)=>await T(t,n,"entreprise",e),effectifsAnnuelEtp:async(e,t,n)=>await d.requestAPI(t,`effectifs_annuels_acoss_covid/${e}`,n).then(e=>{if(!e||!e.effectifs_annuels){const e=new Date,t=Object(E.subYears)(e,1);return{effectifAnnuelEtp:{annee:Object(E.format)(t,"yyyy"),effectifs_annuels:void 0}}}return{effectifAnnuelEtp:e}})},N=n(7),w=n.n(N),P=n(24),G=n.n(P);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=async(e,{axios:t,axiosConfig:n,token:r},...s)=>{let i={};const a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{params:{token:r,context:"Tiers",recipient:"Direccte Occitanie",object:"FCEE - Direccte Occitanie"}});if(a.proxy&&!0===a.proxy.tunnel){const e={proxy:{}};a.proxy.host&&(e.proxy.host=a.proxy.host),a.proxy.port&&(e.proxy.port=a.proxy.port),a.proxy.auth&&(e.proxy.proxyAuth=`${a.proxy.auth.username||""}:${a.proxy.auth.password||""}`),a.proxy=!1,a.httpsAgent=G.a.httpsOverHttp(e)}const o=s.filter(e=>"function"==typeof e).map(n=>n(e,t,a));return await Promise.all(o).then(e=>{Object.assign(i,...e)}),i};const C=Symbol("_axios");Symbol("_requestAPIs");var k=class extends p{constructor(e,t={}){super(),this.token=null,this[C]=w.a.create({baseURL:e,timeout:3e4}),this.axiosConfig=t}async getSIRET(e){return await A(e,{axios:this[C],axiosConfig:this.axiosConfig,token:this.token},R.getEtablissement,R.exercices,R.effectifsMensuelEtp)}async getSIREN(e){return await A(e,{axios:this[C],axiosConfig:this.axiosConfig,token:this.token},I.getEntreprise,I.infogreffe_rcs,I.effectifsMensuelEtp,I.effectifsAnnuelEtp)}getSIRENCheck(e){return!!e.siren}getSIRETCheck(e){return!!e.siret}};var q={association:async(e,t,n)=>await d.requestAPI(t,`associations/${e}`,n).then(e=>{if(e.association&&"object"==typeof e.association&&e.association.etat&&e.association.id)return{association:e.association}}),document_association:async(e,t,n)=>await d.requestAPI(t,`documents_associations/${e}`,n).then(e=>{if(e.documents&&Array.isArray(e.documents)&&e.documents.length){return{document_association:e.documents.reduce((e,t)=>"Statuts"===t.type&&+t.timestamp>+e.timestamp&&t||e,{timestamp:0})}}})};const L=Symbol("_axios");Symbol("_requestAPIs");class M extends p{constructor(e,t={}){super(),this.token=null,this[L]=w.a.create({baseURL:e,timeout:3e4}),this.axiosConfig=t}async getSIRET(e){return await A(e,{axios:this[L],axiosConfig:this.axiosConfig,token:this.token},q.association,q.document_association)}async getSIREN(e){return{siren:e}}getSIRENCheck(e){return!!e.siren}getSIRETCheck(e){var t;return!!(null==e||null===(t=e.association)||void 0===t?void 0:t.siret)}}var $=n(1),K=n(11);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F=async e=>{let t=await y(e,["siren",{in:"denominationunitelegale",out:"raison_sociale"},{in:"sigleunitelegale",out:"sigle"},{in:"nomunitelegale",out:"nom"},{in:"prenom1unitelegale",out:"prenom",callback:(e,t)=>{const n=[t.prenom1unitelegale,t.prenom2unitelegale,t.prenom3unitelegale,t.prenom4unitelegale].filter(e=>e).join(" ");return d.isEmpty(n)?void 0:n}},{in:"nomusageunitelegale",out:"nom_commercial"},{in:"categorieentreprise",out:"categorie_entreprise"},{in:"siren",out:"siret_siege_social",callback:(e,{nicsiegeunitelegale:t})=>d.isEmpty(e)||d.isEmpty(t)?void 0:`${e}${t}`},{in:"categorie_juridique.libelle",out:"categorie_juridique"},{in:"categorie_juridique.code",out:"categorie_juridique_code"},{in:"naf.code",out:"naf"},{in:"naf.libelle",out:"libelle_naf"},{in:"datecreationunitelegale",out:"date_de_creation"},{in:"etatadministratifunitelegale",out:"etat_entreprise"},{in:"etatadministratifunitelegale",out:"date_mise_a_jour",callback:(e,{datedebut:t,datederniertraitementunitelegale:n})=>"C"===e?t:n},{in:"datedebut",out:"date_de_radiation"},{in:"caractereemployeurunitelegale",out:"entreprise_employeur"},{in:"anneeeffectifsunitelegale",out:"annee_tranche_effectif"},{in:"trancheeffectifsunitelegale",out:"tranche_effectif"}]);return Object.entries(K.default).forEach(([n,r])=>{const s=e[n];return!!s&&(!(Array.isArray(s)&&!s.length)&&void(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{},r(e))))}),t};function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z={getEntreprise:async e=>{const t=[{model:$.default.Naf},{model:$.default.CategorieJuridique}],n=await $.default.Entreprise.findOne({where:{siren:e},include:t}),r=[...$.default.Entreprise.associatedSources,{model:"RupcoEtablissement",include:[$.default.RupcoProcedure],entity:"rupcoEtablissements"},{model:"Idcc",include:[$.default.IdccDefinition],entity:"idccs"},{model:"InteractionsPole3ESEER",include:[$.default.Etablissement],entity:"interactionsPole3ESEERs"},{model:"InteractionsPole3ESRC",include:[$.default.Etablissement],entity:"interactionsPole3ESRCs"},{model:"InteractionsPoleC",include:[$.default.Etablissement],entity:"interactionsPoleCs"},{model:"InteractionsPoleT",include:[$.default.Etablissement],entity:"interactionsPoleTs"},{model:"Accord",include:[$.default.Etablissement],entity:"accords"}];return n?(await Promise.all(r.map(({model:t,include:r,entity:s})=>$.default[t].findAll(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){V(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({where:{siren:e}},r&&{include:r})).then(e=>n[s]=e))),await F(n)):{}}},J=n(12);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=async e=>{const t=({numerovoieetablissement:e,indicerepetitionetablissement:t,typevoieetablissement:n,libellevoieetablissement:r,complementadresseetablissement:s,codepostaletablissement:i,codecommuneetablissement:a,libellecommuneetablissement:o})=>({numero_voie:e,indice_repetition:t,type_voie:n,nom_voie:r,complement_adresse:s,code_postal:i,code_insee_localite:a,localite:o});let n=await y(e,["siret",{in:"etatadministratifetablissement",out:"actif",callback:e=>e&&"A"===e},{in:"etatadministratifetablissement",out:"etat_etablissement"},{in:"etatadministratifetablissement",out:"etat_etablissement_libelle",callback:e=>{switch(e){case"A":return"Actif";case"F":return"Fermé";case"C":return"Cessé";default:return}}},{in:"datedebut",out:"date_fin"},{in:"datederniertraitementetablissement",out:"date_dernier_traitement_etablissement"},{in:"enseigne1etablissement",out:"enseigne"},{in:"naf.code",out:"naf"},{in:"naf.libelle",out:"libelle_naf"},{in:"etablissementsiege",out:"siege_social",callback:e=>"true"===e},{in:"etablissementsiege",out:"categorie_etablissement",callback:e=>d.isEmpty(e)?void 0:"true"===e?"Siège social":"Établissement"},{in:"datecreationetablissement",out:"date_creation"},{in:"trancheeffectifsetablissement",out:"tranche_effectif_insee"},{in:"anneeeffectifsetablissement",out:"annee_tranche_effectif_insee"},{in:"complementadresseetablissement",out:"adresse_composant",callback:(e,n)=>{const r=t(n);return d.isEmpty(r)?void 0:r}},{in:"complementadresseetablissement",out:"adresse",callback:(e,n)=>{const r=t(n);return d.isEmpty(r)?void 0:d.getCleanAddress(r)}},{in:"caractereemployeuretablissement",out:"etablissement_employeur"},{in:"entreprise.denominationunitelegale",out:"nom_commercial"},{in:"entreprise.nomunitelegale",out:"nom"},{in:"entreprise.prenom1unitelegale",out:"prenom"}]);return Object.entries(J.default).forEach(([t,r])=>{const s=e[t];return!!s&&(!(Array.isArray(s)&&!s.length)&&void(n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{},r(e))))}),n};var Z={getSettlement:async e=>{const t=[{model:$.default.Naf},{model:$.default.Entreprise},{association:$.default.Etablissement.Successeur,as:"successeur"},{association:$.default.Etablissement.Predecesseur,as:"predecesseur"},...$.default.Etablissement.associatedSources.map(({model:e})=>({model:$.default[e]})),{model:$.default.RupcoEtablissement,include:[$.default.RupcoProcedure]},{model:$.default.Idcc,include:[$.default.IdccDefinition]}],n=await $.default.Etablissement.findOne({where:{siret:e},include:t});return n?await W(n):{}},getSettlements:async e=>{const t=await $.default.Etablissement.findAll({where:{siren:e},order:[["etablissementsiege","DESC"],["etatadministratifetablissement","ASC"]]});if(!t)return{};const n=await Promise.all(t.map(async e=>await W(e)));return{nombre_etablissements_actifs:n.filter(e=>e.actif).length,_ets:n}}};const Q=Symbol("_requestPG");var ee=class extends p{async getSIRET(e){return await this[Q](e,Z.getSettlement)}async getSIREN(e){return await this[Q](e,z.getEntreprise,Z.getSettlements)}getSIRENCheck(e){return!!e.siren}getSIRETCheck(e){return!!e.siret}async[Q](e,...t){let n={};const r=t.filter(e=>"function"==typeof e).map(async t=>t(e));return await Promise.all(r).then(e=>{Object.assign(n,...e)}),n}};function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const se=Symbol("_importData"),ie=Symbol("_data");class ae{constructor(e={}){this[se](e,!0)}updateData(e){this[se](e)}replaceData(e){this[se](e,!0)}getData(){return this[ie]}[se](e,t=!1){const n=e=>e||!1===e;if("object"==typeof e)if(t||void 0===this[ie])this[ie]=ne({},{},{},e);else for(const[t,r]of Object.entries(e))Object.prototype.hasOwnProperty.call(this[ie],t)&&!n(r)||(this[ie]=ne({},this[ie],{},{[t]:r}));Object.keys(this[ie]).forEach(e=>{Object.prototype.hasOwnProperty.call(this,e)||Object.defineProperty(this,e,{get:()=>this[ie][e]})},this)}}const oe=se;function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e){const t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return Object.keys(t).reduce((e,n)=>(null!==t[n]&&void 0!==t[n]&&(e[n]=t[n]),e),{})}function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const de=Symbol("_ets"),me=Symbol("_etsModel");class be extends ae{constructor(e,t=Oe){super(),this[de]=[],this[me]=t,this.replaceData(e)}[oe](e,t){const n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);let r=n._ets;r&&(Array.isArray(r)||(r=[r]),r.forEach(e=>{e&&"object"==typeof e&&u(e.siret)&&this.getEtablissement(e.siret).updateData(le(e))}),delete n._ets),super[oe](n,t)}get etablissements(){return this[de]}hasEtablissement(e){return!!this.getEtablissement(e,!1)}getEtablissement(e,t=!0){return this[de].find(t=>t.siret===e)||t&&this[de].push(new this[me]({siret:e},this))&&this.getEtablissement(e)||null}}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ge=Symbol("_entreprise");class ve extends ae{constructor(e,t){super(),this[ge]=t,this.replaceData(e)}[oe](e){if(this[ge]){const t=e&&e._etData;t&&"object"==typeof t&&(this[ge].updateData(le(t)),this[ge].updateData({_dataSources:he({},this[ge]._dataSources,{},e._dataSources)}),delete e._etData)}super[oe](e)}}var Oe=be;function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Te={dataSources:Symbol("_dataSources"),compareDataSource:Symbol("_compareDataSource"),askDataSource:Symbol("_askDataSource"),isValidDataSources:Symbol("_isValidDataSources")};t.default=new class{constructor(){this.EntrepriseModel=be,this.EtablissementModel=ve,this[Te.dataSources]=[],this.addDataSource({name:"ApiGouv",priority:80,source:new k("https://entreprise.api.gouv.fr:443/v2/")}),this.addDataSource({name:"ApiGouvAssociations",priority:80,source:new M("https://entreprise.api.gouv.fr:443/v2/")}),this.addDataSource({name:"PG",priority:100,source:new ee})}initSentry(e){r.init({dsn:e})}async getEntreprise(e,t){const n=c(e+=""),r=u(e);if(!n&&!r)throw new i(e);const s=n?e:e.substr(0,9),a=new this.EntrepriseModel({_dataSources:{}},this.EtablissementModel);await this[Te.askDataSource]("getSIREN",s,t).then(e=>{console.log(`Using response from dataSource named ${e.source.name} with priority : ${e.source.priority}`),a.updateData(Ee({},e.data,{_dataSources:Ee({},a._dataSources,{[e.source.name]:e.success})}))});const o=r?e:""+a.siret_siege_social,l=Object.keys({[a.siret_siege_social]:!0,[o]:!0});return await Promise.all(l.map(e=>{if(u(e))return this[Te.askDataSource]("getSIRET",e,t).then(t=>{console.log(`Using response from dataSource named ${t.source.name} with priority : ${t.source.priority}`);const n=a.getEtablissement(e);n.updateData(Ee({},t.data,{_dataSources:Ee({},n._dataSources,{[t.source.name]:t.success})}))})})),a.updateData({_success:this[Te.isValidDataSources](a._dataSources)}),a.etablissements.map(e=>{e.updateData({_success:this[Te.isValidDataSources](e._dataSources)})}),a}getDataSources(){return[...this[Te.dataSources]].sort(this[Te.compareDataSource])}getDataSource(e){return this[Te.dataSources].find(t=>t.name===e)}addDataSource(e){this[Te.dataSources].includes(e)||this[Te.dataSources].push(e)}removeDataSource(e){this[Te.dataSources]=this[Te.dataSources].filter(t=>t!==e)}[Te.compareDataSource](e,t){return(e=+(e&&e.priority))>(t=+(t&&t.priority))?1:e<t?-1:0}[Te.askDataSource](e,t,n){const r=this.getDataSource(n);if(!r)throw new o(n);return r.source[e](t).then(n=>{const s="object"==typeof n&&n.items?n.items:n,i="object"==typeof s?Array.isArray(s)?s.map(le):le(s):s,a=r.source[`${e}Check`](i);return console.log(`Got response for [${e}] from dataSource named ${r.name} about request : ${JSON.stringify(t)}, status : ${a?"Success":"Failed"}`),{data:i,source:r,success:a}})}[Te.isValidDataSources](e){return e&&!!Object.values(e).includes(!0)}};const Re=u,Ie=c}])}));