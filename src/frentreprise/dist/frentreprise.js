!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("frentreprise",[],t):"object"==typeof exports?exports.frentreprise=t():e.frentreprise=t()}(global,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=27)}([function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(3);const i=(e,t="yyyy-MM-dd")=>{if(!e)return null;e=e.trim();const r=["yyyy-MM-dd","yyyy/MM/dd","dd/MM/yyyy","ddMMMyyyy","dd/MM/yy","M/d/yy"];for(const i of r){const r=Object(n.parse)(e,i,new Date);if(Object(n.isValid)(r))return Object(n.format)(r,t)}return null}},function(e,t,r){"use strict";r.r(t),r.d(t,"sequelize",(function(){return p}));var n=r(12),i=r.n(n);const{PG_HOST:s,PG_USER:o,PG_PASSWORD:a,PG_DB:c,PG_SSL:u,PROD:l,SQL_LOGS:f}=process.env,p=new i.a(c,o,a,{host:s,dialect:"postgres",dialectOptions:{ssl:"true"===u},define:{timestamps:!1},logging:"true"!==l&&"false"!==f&&console.log}),d={},m=r(50);m.keys().forEach(e=>{const t=e.split("/").pop().split(".").shift(),r=t.charAt(0).toUpperCase()+t.slice(1);try{if("Index"===r)return;d[r]=m(e).default(p,i.a.DataTypes)}catch(e){console.error("Cannot load model "+r)}}),Object.keys(d).forEach(e=>{"associate"in d[e]&&d[e].associate(d)}),t.default=d},function(e,t,r){"use strict";var n=r(13),i=r(29),s=Object.prototype.toString;function o(e){return"[object Array]"===s.call(e)}function a(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===s.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===s.call(e)},isBuffer:i,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===s.call(e)},isFile:function(e){return"[object File]"===s.call(e)},isBlob:function(e){return"[object Blob]"===s.call(e)},isFunction:c,isStream:function(e){return a(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:u,merge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]=r}for(var n=0,i=arguments.length;n<i;n++)u(arguments[n],r);return t},deepMerge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]="object"==typeof r?e({},r):r}for(var n=0,i=arguments.length;n<i;n++)u(arguments[n],r);return t},extend:function(e,t,r){return u(t,(function(t,i){e[i]=r&&"function"==typeof t?n(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t){e.exports=require("date-fns")},function(e,t){e.exports=require("lodash.get")},function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return y})),r.d(t,"e",(function(){return h}));var n=r(3),i=r(4),s=r.n(i);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u=(e,t)=>({pse:l(e,t),rcc:f(e,t),lice:p(e,t)}),l=(e,t)=>t(e,"PSE"),f=(e,t)=>t(e,"RCC"),p=(e,t)=>t(e,"Lice"),d={pse:{procedureDurationLimit:36},lice:{types:{"LiceC -10":"Licenciement moins de 10 salariés (2 à 9 salariés)","LiceC +10":"Licenciement plus de 10 salariés (entreprise de moins de 50 salariés)"}},historicDataDefaultState:"Non communiqué",historicDataStates:{cloture:"Clôturé",BilanTermine:"Bilan terminé"}},m=({type:e="",nombre_de_ruptures:t})=>"LiceC -10"===e||t>0,b=({type:e="",date_enregistrement:t})=>!e.includes("PSE")||((e,t=s()(d,"pse.procedureDurationLimit"))=>!!e&&Object(n.differenceInMonths)(new Date,Object(n.parseISO)(e))<=t)(t),y=e=>s()(e,"type","").includes("LiceC")?a({},e,{type:s()(d,"lice.types")[e.type],rawType:e.type}):e,h=e=>e&&!e.historique_si?e:a({},e,{etat:Object.keys(s()(d,"historicDataStates")).includes(e.etat)?s()(d,"historicDataStates")[e.etat]:s()(d,"historicDataDefaultState")})},function(e,t){e.exports=require("lodash.orderby")},function(e,t,r){"use strict";t.a=e=>{const t={};return e.keys().forEach(r=>{const n=r.split("/").pop().split(".").shift();try{"index"!==n&&(t[n]=e(r).default)}catch(e){console.error("Cannot load file "+n)}}),t}},function(e,t,r){"use strict";var n=r(25),i=r.n(n),s=r(26),o=r.n(s);t.a=({idccs:e})=>{const t=e.filter(({idcc:e,idccDefinition:t})=>"9999"!==e&&t).map(({idccDefinition:{code:e,libelle:t}})=>({code:e,libelle:t}));return{idcc:i()(t,o.a)}}},function(e,t,r){"use strict";var n=r(17);e.exports=function(e,t,r,i,s){var o=new Error(e);return n(o,t,r,i,s)}},function(e,t,r){"use strict";r.r(t);var n=r(7);const i=r(72),s=Object(n.a)(i);t.default=s},function(e,t,r){"use strict";r.r(t);var n=r(7);const i=r(81),s=Object(n.a)(i);t.default=s},function(e,t){e.exports=require("sequelize")},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";var n=r(2),i=r(34),s={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,c={adapter:("undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)?a=r(35):"undefined"!=typeof XMLHttpRequest&&(a=r(41)),a),transformRequest:[function(e,t){return i(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){c.headers[e]=n.merge(s)})),e.exports=c},function(e,t,r){"use strict";var n=r(9);e.exports=function(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e}},function(e,t,r){"use strict";var n=r(2);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var s;if(r)s=r(t);else if(n.isURLSearchParams(t))s=t.toString();else{var o=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),o.push(i(t)+"="+i(e))})))})),s=o.join("&")}return s&&(e+=(-1===e.indexOf("?")?"?":"&")+s),e}},function(e,t){e.exports=require("follow-redirects")},function(e,t,r){"use strict";var n=r(2);e.exports=function(e,t){t=t||{};var r={};return n.forEach(["url","method","params","data"],(function(e){void 0!==t[e]&&(r[e]=t[e])})),n.forEach(["headers","auth","proxy"],(function(i){n.isObject(t[i])?r[i]=n.deepMerge(e[i],t[i]):void 0!==t[i]?r[i]=t[i]:n.isObject(e[i])?r[i]=n.deepMerge(e[i]):void 0!==e[i]&&(r[i]=e[i])})),n.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],(function(n){void 0!==t[n]?r[n]=t[n]:void 0!==e[n]&&(r[n]=e[n])})),r}},function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t){e.exports=require("@sentry/node")},function(e,t,r){e.exports=r(28)},function(e,t){e.exports=require("tunnel")},function(e,t){e.exports=require("lodash.uniqwith")},function(e,t){e.exports=require("lodash.isequal")},function(e,t,r){e.exports=r(97)},function(e,t,r){"use strict";var n=r(2),i=r(13),s=r(30),o=r(20);function a(e){var t=new s(e),r=i(s.prototype.request,t);return n.extend(r,s.prototype,t),n.extend(r,t),r}var c=a(r(15));c.Axios=s,c.create=function(e){return a(o(c.defaults,e))},c.Cancel=r(21),c.CancelToken=r(48),c.isCancel=r(14),c.all=function(e){return Promise.all(e)},c.spread=r(49),e.exports=c,e.exports.default=c},function(e,t){e.exports=require("is-buffer")},function(e,t,r){"use strict";var n=r(2),i=r(31),s=r(32),o=r(20);function a(e){this.defaults=e,this.interceptors={request:new i,response:new i}}a.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=o(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var t=[s,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},n.forEach(["delete","get","head","options"],(function(e){a.prototype[e]=function(t,r){return this.request(n.merge(r||{},{method:e,url:t}))}})),n.forEach(["post","put","patch"],(function(e){a.prototype[e]=function(t,r,i){return this.request(n.merge(i||{},{method:e,url:t,data:r}))}})),e.exports=a},function(e,t,r){"use strict";var n=r(2);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,r){"use strict";var n=r(2),i=r(33),s=r(14),o=r(15),a=r(46),c=r(47);function u(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return u(e),e.baseURL&&!a(e.url)&&(e.url=c(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return u(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(u(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,r){"use strict";var n=r(2);e.exports=function(e,t,r){return n.forEach(r,(function(r){e=r(e,t)})),e}},function(e,t,r){"use strict";var n=r(2);e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},function(e,t,r){"use strict";var n=r(2),i=r(16),s=r(18),o=r(36),a=r(37),c=r(19).http,u=r(19).https,l=r(38),f=r(39),p=r(40),d=r(9),m=r(17);e.exports=function(e){return new Promise((function(t,r){var b,y=function(e){clearTimeout(b),t(e)},h=function(e){clearTimeout(b),r(e)},_=e.data,g=e.headers;if(g["User-Agent"]||g["user-agent"]||(g["User-Agent"]="axios/"+p.version),_&&!n.isStream(_)){if(Buffer.isBuffer(_));else if(n.isArrayBuffer(_))_=new Buffer(new Uint8Array(_));else{if(!n.isString(_))return h(d("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));_=new Buffer(_,"utf-8")}g["Content-Length"]=_.length}var O=void 0;e.auth&&(O=(e.auth.username||"")+":"+(e.auth.password||""));var v=l.parse(e.url),S=v.protocol||"http:";if(!O&&v.auth){var j=v.auth.split(":");O=(j[0]||"")+":"+(j[1]||"")}O&&delete g.Authorization;var E="https:"===S,T=E?e.httpsAgent:e.httpAgent,R={path:s(v.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method,headers:g,agent:T,auth:O};e.socketPath?R.socketPath=e.socketPath:(R.hostname=v.hostname,R.port=v.port);var I,N=e.proxy;if(!N&&!1!==N){var w=S.slice(0,-1)+"_proxy",P=process.env[w]||process.env[w.toUpperCase()];if(P){var G=l.parse(P);if(N={host:G.hostname,port:G.port},G.auth){var x=G.auth.split(":");N.auth={username:x[0],password:x[1]}}}}if(N&&(R.hostname=N.host,R.host=N.host,R.headers.host=v.hostname+(v.port?":"+v.port:""),R.port=N.port,R.path=S+"//"+v.hostname+(v.port?":"+v.port:"")+R.path,N.auth)){var D=new Buffer(N.auth.username+":"+N.auth.password,"utf8").toString("base64");R.headers["Proxy-Authorization"]="Basic "+D}e.transport?I=e.transport:0===e.maxRedirects?I=E?a:o:(e.maxRedirects&&(R.maxRedirects=e.maxRedirects),I=E?u:c),e.maxContentLength&&e.maxContentLength>-1&&(R.maxBodyLength=e.maxContentLength);var A=I.request(R,(function(t){if(!A.aborted){var r=t;switch(t.headers["content-encoding"]){case"gzip":case"compress":case"deflate":r=r.pipe(f.createUnzip()),delete t.headers["content-encoding"]}var n=t.req||A,s={status:t.statusCode,statusText:t.statusMessage,headers:t.headers,config:e,request:n};if("stream"===e.responseType)s.data=r,i(y,h,s);else{var o=[];r.on("data",(function(t){o.push(t),e.maxContentLength>-1&&Buffer.concat(o).length>e.maxContentLength&&h(d("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,n))})),r.on("error",(function(t){A.aborted||h(m(t,e,null,n))})),r.on("end",(function(){var t=Buffer.concat(o);"arraybuffer"!==e.responseType&&(t=t.toString(e.responseEncoding)),s.data=t,i(y,h,s)}))}}}));A.on("error",(function(t){A.aborted||h(m(t,e,null,A))})),e.timeout&&(b=setTimeout((function(){A.abort(),h(d("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",A))}),e.timeout)),e.cancelToken&&e.cancelToken.promise.then((function(e){A.aborted||(A.abort(),h(e))})),n.isStream(_)?_.on("error",(function(t){h(m(t,e,null,A))})).pipe(A):A.end(_)}))}},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("zlib")},function(e){e.exports=JSON.parse('{"name":"axios","version":"0.18.0","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test && bundlesize","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://github.com/axios/axios","devDependencies":{"bundlesize":"^0.17.0","coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.0.2","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-nodeunit":"^1.0.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^20.1.0","grunt-karma":"^2.0.0","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^1.3.0","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.2.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","sinon":"^4.5.0","webpack":"^1.13.1","webpack-dev-server":"^1.14.1","url-search-params":"^0.10.0","typescript":"^2.8.1"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.4.1","is-buffer":"^2.0.2"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},function(e,t,r){"use strict";var n=r(2),i=r(16),s=r(18),o=r(42),a=r(43),c=r(9),u="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(44);e.exports=function(e){return new Promise((function(t,l){var f=e.data,p=e.headers;n.isFormData(f)&&delete p["Content-Type"];var d=new XMLHttpRequest,m="onreadystatechange",b=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in d||a(e.url)||(d=new window.XDomainRequest,m="onload",b=!0,d.onprogress=function(){},d.ontimeout=function(){}),e.auth){var y=e.auth.username||"",h=e.auth.password||"";p.Authorization="Basic "+u(y+":"+h)}if(d.open(e.method.toUpperCase(),s(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d[m]=function(){if(d&&(4===d.readyState||b)&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in d?o(d.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?d.response:d.responseText,status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:r,config:e,request:d};i(t,l,n),d=null}},d.onabort=function(){d&&(l(c("Request aborted",e,"ECONNABORTED",d)),d=null)},d.onerror=function(){l(c("Network Error",e,null,d)),d=null},d.ontimeout=function(){l(c("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",d)),d=null},n.isStandardBrowserEnv()){var _=r(45),g=(e.withCredentials||a(e.url))&&e.xsrfCookieName?_.read(e.xsrfCookieName):void 0;g&&(p[e.xsrfHeaderName]=g)}if("setRequestHeader"in d&&n.forEach(p,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete p[t]:d.setRequestHeader(t,e)})),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){d&&(d.abort(),l(e),d=null)})),void 0===f&&(f=null),d.send(f)}))}},function(e,t,r){"use strict";var n=r(2),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,s,o={};return e?(n.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=n.trim(e.substr(0,s)).toLowerCase(),r=n.trim(e.substr(s+1)),t){if(o[t]&&i.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([r]):o[t]?o[t]+", "+r:r}})),o):o}},function(e,t,r){"use strict";var n=r(2);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=i(window.location.href),function(t){var r=n.isString(t)?i(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";function n(){this.message="String contains an invalid character"}n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,r,i=String(e),s="",o=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.charAt(0|o)||(a="=",o%1);s+=a.charAt(63&t>>8-o%1*8)){if((r=i.charCodeAt(o+=3/4))>255)throw new n;t=t<<8|r}return s}},function(e,t,r){"use strict";var n=r(2);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,i,s,o){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(i)&&a.push("path="+i),n.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var n=r(21);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){var n={"./activitePartielle.js":51,"./apprentissage.js":52,"./categorieJuridique.js":53,"./contratAide.js":54,"./departement.js":55,"./dsnEff.js":56,"./entreprise.js":57,"./etablissement.js":58,"./iae.js":59,"./idcc.js":60,"./idccDefinition.js":61,"./index.js":1,"./interactionsPole3ESEER.js":62,"./interactionsPole3ESRC.js":63,"./interactionsPoleC.js":64,"./interactionsPoleT.js":65,"./naf.js":66,"./polesCompetitivite.js":67,"./rupcoEtablissement.js":68,"./rupcoProcedure.js":69,"./succession.js":70,"./ucEff.js":71};function i(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=s,e.exports=i,i.id=50},function(e,t,r){"use strict";r.r(t);t.default=(e,t)=>e.define("activitePartielle",{siret:t.STRING,num_convention:t.STRING,date_decision:t.STRING,num_avenant:t.INTEGER,da_init:t.STRING,nb_h_auto_avn:t.FLOAT,nb_h_auto_cum:t.FLOAT,nb_h_conso_cum:t.FLOAT,cause:t.STRING},{tableName:"etablissements_activite_partielle"})},function(e,t,r){"use strict";r.r(t);t.default=(e,t)=>e.define("apprentissage",{siret:t.STRING,type_contrat:t.INTEGER,numero_enregistrement:t.STRING,date_debut:t.STRING,date_rupture:t.STRING},{tableName:"etablissements_apprentissage"})},function(e,t,r){"use strict";r.r(t);t.default=(e,t)=>e.define("categorie_juridique",{code:t.STRING,libelle:t.STRING},{tableName:"categorie_juridique"})},function(e,t,r){"use strict";r.r(t);t.default=(e,t)=>e.define("contratAide",{siret:t.STRING,CA_stock_12_2018:t.INTEGER,CA_contrat_2018:t.INTEGER,CA_entree_2018:t.INTEGER,contrat_aide:t.BOOLEAN},{tableName:"etablissements_contrats_aides"})},function(e,t,r){"use strict";r.r(t);t.default=(e,t)=>e.define("departements",{code:t.STRING,nom:t.STRING})},function(e,t,r){"use strict";r.r(t);t.default=(e,t)=>e.define("dsnEff",{siret:t.STRING,eff:t.INTEGER,mois:t.STRING,hommes:t.INTEGER,femmes:t.INTEGER,cdd:t.INTEGER,cdi:t.INTEGER,cdi_inter:t.INTEGER,inter_mission:t.INTEGER,interim:t.INTEGER,date_maj:t.STRING},{tableName:"etablissements_dsn_eff"})},function(e,t,r){"use strict";r.r(t);const n=[{type:"hasMany",model:"ActivitePartielle",entity:"activitePartielles"},{type:"hasMany",model:"Apprentissage",entity:"apprentissages"}];t.default=(e,t)=>{const r=e.define("entreprise",{siren:{type:t.STRING,primaryKey:!0},statutdiffusionunitelegale:t.STRING,unitepurgeeunitelegale:t.STRING,datecreationunitelegale:t.DATEONLY,sigleunitelegale:t.STRING,sexeunitelegale:t.STRING,prenom1unitelegale:t.STRING,prenom2unitelegale:t.STRING,prenom3unitelegale:t.STRING,prenom4unitelegale:t.STRING,pseudonymeunitelegale:t.STRING,identifiantassociationunitelegale:t.STRING,trancheeffectifsunitelegale:t.STRING,anneeeffectifsunitelegale:t.STRING,datederniertraitementunitelegale:t.DATEONLY,nombreperiodesunitelegale:t.INTEGER,categorieentreprise:t.STRING,anneecategorieentreprise:t.STRING,datedebut:t.DATEONLY,etatadministratifunitelegale:t.STRING,nomunitelegale:t.STRING,nomusageunitelegale:t.STRING,denominationunitelegale:t.STRING,denominationusuelle1unitelegale:t.STRING,denominationusuelle2unitelegale:t.STRING,denominationusuelle3unitelegale:t.STRING,categoriejuridiqueunitelegale:t.STRING,activiteprincipaleunitelegale:t.STRING,nomenclatureactiviteprincipaleunitelegale:t.STRING,nicsiegeunitelegale:t.STRING,economiesocialesolidaireunitelegale:t.STRING,caractereemployeurunitelegale:t.STRING,prenomusuelunitelegale:t.STRING},{tableName:"entreprises"});return r.associatedSources=n,r.associate=e=>{r.belongsTo(e.Naf,{foreignKey:"activiteprincipaleunitelegale",targetKey:"code"}),r.belongsTo(e.CategorieJuridique,{foreignKey:"categoriejuridiqueunitelegale",targetKey:"code"}),r.hasMany(e.RupcoEtablissement,{foreignKey:"siren",sourceKey:"siren"}),r.hasMany(e.Idcc,{foreignKey:"siren",sourceKey:"siren"}),r.hasMany(e.InteractionsPole3ESEER,{foreignKey:"siren",sourceKey:"siren"}),r.hasMany(e.InteractionsPole3ESRC,{foreignKey:"siren",sourceKey:"siren"}),r.hasMany(e.InteractionsPoleC,{foreignKey:"siren",sourceKey:"siren"}),r.hasMany(e.InteractionsPoleT,{foreignKey:"siren",sourceKey:"siren"}),n.forEach(({type:t,model:n})=>{r[t](e[n],{foreignKey:"siren",sourceKey:"siren"})})},r}},function(e,t,r){"use strict";r.r(t);const n=[{type:"hasMany",model:"ActivitePartielle"},{type:"hasOne",model:"ContratAide"},{type:"hasOne",model:"DsnEff"},{type:"hasOne",model:"Iae"},{type:"hasMany",model:"InteractionsPole3ESEER"},{type:"hasMany",model:"InteractionsPole3ESRC"},{type:"hasMany",model:"InteractionsPoleC"},{type:"hasMany",model:"InteractionsPoleT"},{type:"hasMany",model:"PolesCompetitivite"},{type:"hasOne",model:"UcEff"}];t.default=(e,t)=>{const r=e.define("etablissement",{siret:{type:t.STRING,primaryKey:!0},siren:t.STRING,nic:t.STRING,statutdiffusionetablissement:t.STRING,datecreationetablissement:t.DATEONLY,trancheeffectifsetablissement:t.STRING,anneeeffectifsetablissement:t.STRING,activiteprincipaleregistremetiersetablissement:t.STRING,datederniertraitementetablissement:t.DATEONLY,etablissementsiege:t.STRING,nombreperiodesetablissement:t.INTEGER,complementadresseetablissement:t.STRING,numerovoieetablissement:t.STRING,indicerepetitionetablissement:t.STRING,typevoieetablissement:t.STRING,libellevoieetablissement:t.STRING,codepostaletablissement:t.STRING,libellecommuneetablissement:t.STRING,libellecommuneetrangeretablissement:t.STRING,distributionspecialeetablissement:t.STRING,codecommuneetablissement:t.STRING,codecedexetablissement:t.STRING,libellecedexetablissement:t.STRING,codepaysetrangeretablissement:t.STRING,libellepaysetrangeretablissement:t.STRING,complementadresse2etablissement:t.STRING,numerovoie2etablissement:t.STRING,indicerepetition2etablissement:t.STRING,typevoie2etablissement:t.STRING,libellevoie2etablissement:t.STRING,codepostal2etablissement:t.STRING,libellecommune2etablissement:t.STRING,libellecommuneetranger2etablissement:t.STRING,distributionspeciale2etablissement:t.STRING,codecommune2etablissement:t.STRING,codecedex2etablissement:t.STRING,libellecedex2etablissement:t.STRING,codepaysetranger2etablissement:t.STRING,libellepaysetranger2etablissement:t.STRING,datedebut:t.DATEONLY,etatadministratifetablissement:t.STRING,enseigne1etablissement:t.STRING,enseigne2etablissement:t.STRING,enseigne3etablissement:t.STRING,denominationusuelleetablissement:t.STRING,activiteprincipaleetablissement:t.STRING,nomenclatureactiviteprincipaleetablissement:t.STRING,caractereemployeuretablissement:t.STRING},{tableName:"etablissements"});return r.associatedSources=n,r.associate=e=>{r.belongsTo(e.Naf,{foreignKey:"activiteprincipaleetablissement",targetKey:"code"}),r.belongsTo(e.Entreprise,{foreignKey:"siren",targetKey:"siren"}),r.hasMany(e.RupcoEtablissement,{foreignKey:"siret",sourceKey:"siret"}),r.hasMany(e.Idcc,{foreignKey:"siret",sourceKey:"siret"}),n.forEach(({type:t,model:n})=>{r[t](e[n],{foreignKey:"siret",sourceKey:"siret"})}),r.Successeur=r.hasOne(e.Succession,{as:"successeur",foreignKey:"siretetablissementpredecesseur",targetKey:"siret"}),r.Predecesseur=r.hasOne(e.Succession,{as:"predecesseur",foreignKey:"siretetablissementsuccesseur",targetKey:"siret"})},r}},function(e,t,r){"use strict";r.r(t);t.default=(e,t)=>e.define("iae",{siret:t.STRING,EI:t.BOOLEAN,ACI:t.BOOLEAN,AI:t.BOOLEAN,ETTI:t.BOOLEAN,EI_SI2018:t.INTEGER,ACI_SI2018:t.INTEGER,AI_SI2018:t.INTEGER,ETTI_SI2018:t.INTEGER,EI_ETP2018:t.FLOAT,ACI_ETP2018:t.FLOAT,AI_ETP2018:t.FLOAT,ETTI_ETP2018:t.FLOAT},{tableName:"etablissements_iae"})},function(e,t,r){"use strict";r.r(t);t.default=(e,t)=>{const r=e.define("idcc",{siret:t.STRING,idcc:t.STRING,date_maj:t.STRING,mois:t.STRING},{tableName:"etablissements_idcc"});return r.associate=e=>{r.hasOne(e.IdccDefinition,{foreignKey:"code",sourceKey:"idcc"})},r}},function(e,t,r){"use strict";r.r(t);t.default=(e,t)=>e.define("idccDefinition",{code:t.STRING,libelle:t.STRING},{tableName:"idcc"})},function(e,t,r){"use strict";r.r(t);t.default=(e,t)=>{const r=e.define("interactionsPole3ESEER",{siret:t.STRING,date_visite:t.STRING,region:t.STRING,inspecteurs:t.STRING,filieres:t.STRING,type_suivi:t.STRING,suivi_eti:t.STRING},{tableName:"interactions_pole_3e"});return r.associate=e=>{r.hasOne(e.Etablissement,{foreignKey:"siret",sourceKey:"siret"})},r}},function(e,t,r){"use strict";r.r(t);t.default=(e,t)=>{const r=e.define("interactionsPole3ESRC",{siret:t.STRING,region:t.STRING,libelle_region:t.STRING,numero_dossier:t.STRING,type_controle:t.STRING,nature_controle:t.STRING,cible_controle:t.STRING,date:t.STRING,clos:t.STRING,clos_automatiquement:t.STRING},{tableName:"interactions_pole_3e_src"});return r.associate=e=>{r.hasOne(e.Etablissement,{foreignKey:"siret",sourceKey:"siret"})},r}},function(e,t,r){"use strict";r.r(t);t.default=(e,t)=>{const r=e.define("interactionsPoleC",{siret:t.STRING,annee:t.STRING,mois:t.STRING,jour:t.STRING,suite:t.BOOLEAN,unite:t.STRING,messagerie:t.STRING,date:t.STRING},{tableName:"interactions_pole_c"});return r.associate=e=>{r.hasOne(e.Etablissement,{foreignKey:"siret",sourceKey:"siret"})},r}},function(e,t,r){"use strict";r.r(t);t.default=(e,t)=>{const r=e.define("interactionsPoleT",{siret:t.STRING,type_intervention:t.STRING,date:t.STRING,realise_pour:t.STRING,action_sur:t.STRING,intervenant:t.STRING},{tableName:"interactions_pole_t"});return r.associate=e=>{r.hasOne(e.Etablissement,{foreignKey:"siret",sourceKey:"siret"})},r}},function(e,t,r){"use strict";r.r(t);t.default=(e,t)=>e.define("naf",{code:t.STRING,libelle:t.STRING,nomenclature:t.STRING,recherche:t.BOOLEAN},{tableName:"naf"})},function(e,t,r){"use strict";r.r(t);t.default=(e,t)=>e.define("polesCompetitivite",{siret:t.STRING,designation_pole:t.STRING},{tableName:"poles_competitivite"})},function(e,t,r){"use strict";r.r(t);t.default=(e,t)=>{const r=e.define("rupcoEtablissement",{siret:t.STRING,numero:t.INTEGER,type:t.STRING,date_enregistrement:t.STRING,siren:t.STRING,date_jugement:t.STRING,situation_juridique:t.STRING,siren_etablissement:t.STRING,effectif_etablissement:t.INTEGER,nombre_de_ruptures_de_contrats_en_debut_de_procedure:t.INTEGER,nombre_de_ruptures_de_contrats_en_fin_de_procedure:t.INTEGER,historique_si:t.BOOLEAN},{tableName:"rupco_etablissements"});return r.associate=e=>{r.hasOne(e.RupcoProcedure,{foreignKey:"numero",sourceKey:"numero"})},r}},function(e,t,r){"use strict";r.r(t);t.default=(e,t)=>e.define("rupcoProcedure",{numero:t.INTEGER,type:t.STRING,date_enregistrement:t.STRING,etat:t.STRING,siren:t.STRING,effectif_entreprise:t.INTEGER,effectif_groupe:t.INTEGER,nom_groupe:t.STRING,date_jugement:t.STRING,situation_juridique:t.STRING,historique_si:t.BOOLEAN},{tableName:"rupco_procedures"})},function(e,t,r){"use strict";r.r(t);t.default=(e,t)=>e.define("succession",{siretetablissementpredecesseur:t.STRING,siretetablissementsuccesseur:t.STRING,dateliensuccession:t.DATEONLY,transfertsiege:t.BOOLEAN,continuiteeconomique:t.BOOLEAN,datederniertraitementliensuccession:t.DATE},{tableName:"etablissements_successions"})},function(e,t,r){"use strict";r.r(t);t.default=(e,t)=>e.define("ucEff",{siret:t.STRING,cod_section:t.STRING,nme_ddtefp3:t.STRING,nme_region:t.STRING,dereffphy:t.INTEGER,date_effphy_et:t.STRING,source_effphy_et:t.INTEGER},{tableName:"etablissements_uc_eff"})},function(e,t,r){var n={"./activitePartielles.js":73,"./apprentissages.js":74,"./idccs.js":75,"./index.js":10,"./interactionsPole3ESEERs.js":76,"./interactionsPole3ESRCs.js":77,"./interactionsPoleCs.js":78,"./interactionsPoleTs.js":79,"./rupcoEtablissements.js":80};function i(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=s,e.exports=i,i.id=72},function(e,t,r){"use strict";r.r(t);var n=r(6),i=r.n(n),s=r(0);t.default=({activitePartielles:e})=>{const t=i()(e,["dataValues.siret","dataValues.date_decision","dataValues.num_avenant"],["asc","asc","asc"]).reduce((e,{siret:t,num_convention:r,date_decision:n,nb_h_auto_cum:i,nb_h_conso_cum:o,cause:a})=>(Object.prototype.hasOwnProperty.call(e,t)||(e[t]={}),Object.prototype.hasOwnProperty.call(e,r)?(e[t][r].nbAvenants++,e[t][r].nbHeuresAutorisees=i,e):(e[t][r]={numConvention:r,nbAvenants:0,date:Object(s.a)(n),nbHeuresAutorisees:i,nbHeuresConsommees:o,motif:a},e)),{});return{activite_partielle:Object.entries(t).map(([e,t])=>{const{nbHeuresAutorisees:r,nbHeuresConsommees:n,date:i}=Object.values(t).reduce((e,{nbHeuresAutorisees:t,nbHeuresConsommees:r,date:n})=>(e.nbHeuresAutorisees+=parseFloat(t),e.nbHeuresConsommees+=parseFloat(r),(!e.date||e.date<n)&&(e.date=n),e),{nbHeuresAutorisees:0,nbHeuresConsommees:0,date:null});return{siret:e,nbHeuresAutorisees:r,nbHeuresConsommees:n,date:i}})}}},function(e,t,r){"use strict";r.r(t);var n=r(0);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.default=({apprentissages:e})=>{const t=(new Date).getFullYear(),r={[t]:0,[t-1]:0,[t-2]:0},i=e.reduce((e,{siret:t,date_debut:i})=>{const o=Object(n.a)(i,"yyyy");return o&&Object.prototype.hasOwnProperty.call(r,o)?(Object.prototype.hasOwnProperty.call(e,t)||(e[t]={siret:t,signes:s({},r)}),e[t].signes[o]++,e):e},{});return{apprentissage:Object.values(i)}}},function(e,t,r){"use strict";r.r(t);var n=r(8);t.default=n.a},function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=({interactionsPole3ESEERs:e})=>({interactions_3E_SEER:e.map(e=>{var t,r,i;return{siret:e.siret,date:Object(n.a)(e.date_visite),pole:"3E_SEER",unite:"Service Entreprise "+(e.region&&e.region.trim()),type:e.type_suivi&&e.type_suivi.trim(),agent:e.inspecteurs&&e.inspecteurs.trim(),filiere:e.filieres&&e.filieres.trim(),eti_pepite:e.suivi_eti&&e.suivi_eti.trim(),etablissement:{etat_etablissement:null==e||null===(t=e.etablissement)||void 0===t?void 0:t.etatadministratifetablissement,adresse_composant:{code_postal:null==e||null===(r=e.etablissement)||void 0===r?void 0:r.codepostaletablissement,localite:null==e||null===(i=e.etablissement)||void 0===i?void 0:i.libellecommuneetablissement}}}})})},function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=({interactionsPole3ESRCs:e})=>{console.log("Debug compilation");return{interactions_3E_SRC:e.map(e=>{var t,r,i;return{siret:e.siret,date:Object(n.a)(e.date),pole:"3E_SRC",unite:"SRC "+(e.libelle_region&&e.libelle_region.trim()),type:e.type_controle&&e.type_controle.trim(),agent:null,etablissement:{etat_etablissement:null==e||null===(t=e.etablissement)||void 0===t?void 0:t.etatadministratifetablissement,adresse_composant:{code_postal:null==e||null===(r=e.etablissement)||void 0===r?void 0:r.codepostaletablissement,localite:null==e||null===(i=e.etablissement)||void 0===i?void 0:i.libellecommuneetablissement}}}})}}},function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=({interactionsPoleCs:e})=>({interactions_C:e.map(({siret:e,unite:t,date:r,etablissement:i})=>({siret:e,pole:"C",unite:t&&t.trim(),type:null,date:Object(n.a)(r),agent:null,note:null,etablissement:{etat_etablissement:null==i?void 0:i.etatadministratifetablissement,adresse_composant:{code_postal:null==i?void 0:i.codepostaletablissement,localite:null==i?void 0:i.libellecommuneetablissement}}}))})},function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=({interactionsPoleTs:e})=>({interactions_T:e.map(e=>{var t,r,i;return{siret:e.siret,pole:"T",unite:e.realise_pour&&e.realise_pour.trim(),type:e.type_intervention&&e.type_intervention.trim(),date:Object(n.a)(e.date),agent:e.intervenant&&e.intervenant.trim(),note:e.action_sur&&e.action_sur.trim(),etablissement:{etat_etablissement:null==e||null===(t=e.etablissement)||void 0===t?void 0:t.etatadministratifetablissement,adresse_composant:{code_postal:null==e||null===(r=e.etablissement)||void 0===r?void 0:r.codepostaletablissement,localite:null==e||null===(i=e.etablissement)||void 0===i?void 0:i.libellecommuneetablissement}}}})})},function(e,t,r){"use strict";r.r(t);var n=r(4),i=r.n(n),s=r(5),o=r(0);t.default=({rupcoEtablissements:e})=>Object(s.a)(e,a);const a=(e,t)=>{const r=e.filter(({type:e})=>e.startsWith(t));return c(r)},c=e=>{const t=e.reduce((e,{date_enregistrement:t,type:r,numero:n,situation_juridique:s,date_jugement:a,siret:c,historique_si:u,rupcoProcedure:l,nombre_de_ruptures_de_contrats_en_debut_de_procedure:f,nombre_de_ruptures_de_contrats_en_fin_de_procedure:p})=>{e[n]||(e[n]={date_enregistrement:Object(o.a)(t),type:r,numero:n,etat:i()(l,"etat"),situation_juridique:s,date_jugement:Object(o.a)(a),nombre_de_ruptures:0,historique_si:u,etablissements:[]});const d=+p||+f||0;return("LiceC -10"===r||d>0)&&(e[n].nombre_de_ruptures+=d,e[n].etablissements.push({siret:c,nombre_de_ruptures:d})),e},{});return Object.values(t).filter(e=>Object(s.b)(e)&&Object(s.c)(e)).map(e=>Object(s.e)(Object(s.d)(e)))}},function(e,t,r){var n={"./activitePartielles.js":82,"./apprentissages.js":83,"./contratAide.js":84,"./dsnEff.js":85,"./iae.js":86,"./idccs.js":87,"./index.js":11,"./interactionsPole3ESEERs.js":88,"./interactionsPole3ESRCs.js":89,"./interactionsPoleCs.js":90,"./interactionsPoleTs.js":91,"./polesCompetitivites.js":92,"./predecesseur.js":93,"./rupcoEtablissements.js":94,"./successeur.js":95,"./ucEff.js":96};function i(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=s,e.exports=i,i.id=81},function(e,t,r){"use strict";r.r(t);var n=r(6),i=r.n(n),s=r(0);t.default=({activitePartielles:e})=>{const t=i()(e,["dataValues.date_decision","dataValues.num_avenant"],["asc","asc"]).reduce((e,{num_convention:t,date_decision:r,nb_h_auto_cum:n,nb_h_conso_cum:i,cause:o})=>Object.prototype.hasOwnProperty.call(e,t)?(e[t].nbAvenants++,e[t].nbHeuresAutorisees=n,e):(e[t]={numConvention:t,nbAvenants:0,date:Object(s.a)(r),nbHeuresAutorisees:n,nbHeuresConsommees:i,motif:o},e),{});return{activite_partielle:Object.values(t)}}},function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=({apprentissages:e})=>{const t=(new Date).getFullYear(),r={[t]:{signes:0,rompus:0},[t-1]:{signes:0,rompus:0},[t-2]:{signes:0,rompus:0}};return{apprentissage:e.reduce((e,{date_debut:t,date_rupture:r})=>{const i=Object(n.a)(t,"yyyy"),s=r&&Object(n.a)(r,"yyyy");return i&&Object.prototype.hasOwnProperty.call(e,i)&&e[i].signes++,s&&Object.prototype.hasOwnProperty.call(e,s)&&e[s].rompus++,e},r)}}},function(e,t,r){"use strict";r.r(t),t.default=({contratAide:e})=>({contrat_aide:!!e.contrat_aide,contrat_aide_salaries_n1:e.CA_stock_12_2018,contrat_aide_embauches_n1:e.CA_entree_2018,contrat_aide_alternance_n1:null})},function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=({dsnEff:e})=>({dernier_effectif_physique:e.eff,date_dernier_effectif_physique:Object(n.a)(e.date_maj),dsnEffectif:{total:e.eff,hommes:e.hommes,femmes:e.femmes,cdd:e.cdd,cdi:e.cdi,cdi_inter:e.cdi_inter,inter_mission:e.inter_mission,interim:e.interim,date:Object(n.a)(e.date_maj)}})},function(e,t,r){"use strict";r.r(t),t.default=({iae:e})=>({agrements_iae:{ei:{agrement:e.EI,salariesInsertion:e.EI_SI2018,etp:e.EI_ETP2018},aci:{agrement:e.ACI,salariesInsertion:e.ACI_SI2018,etp:e.ACI_ETP2018},ai:{agrement:e.AI,salariesInsertion:e.AI_SI2018,etp:e.AI_ETP2018},etti:{agrement:e.ETTI,salariesInsertion:e.ETTI_SI2018,etp:e.ETTI_ETP2018}}})},function(e,t,r){"use strict";r.r(t);var n=r(8);t.default=n.a},function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=({interactionsPole3ESEERs:e})=>({interactions_3E_SEER:e.map(e=>({date:Object(n.a)(e.date_visite),pole:"3E_SEER",unite:"Service Entreprise "+(e.region&&e.region.trim()),type:e.type_suivi&&e.type_suivi.trim(),agent:e.inspecteurs&&e.inspecteurs.trim(),filiere:e.filieres&&e.filieres.trim(),eti_pepite:e.suivi_eti&&e.suivi_eti.trim()}))})},function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=({interactionsPole3ESRCs:e})=>({interactions_3E_SRC:e.map(e=>({date:Object(n.a)(e.date),pole:"3E_SRC",unite:"SRC "+(e.libelle_region&&e.libelle_region.trim()),type:e.type_controle&&e.type_controle.trim(),nature:e.nature_controle&&e.nature_controle.trim(),cible:e.cible_controle&&e.cible_controle.trim(),agent:null,clos:"Oui"===e.clos||"Oui"===e.clos_automatiquement}))})},function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=({interactionsPoleCs:e})=>({interactions_C:e.map(({unite:e,date:t})=>({pole:"C",unite:e&&e.trim(),type:null,date:Object(n.a)(t),agent:null,note:null}))})},function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=({interactionsPoleTs:e})=>({interactions_T:e.map(e=>({pole:"T",unite:e.realise_pour&&e.realise_pour.trim(),type:e.type_intervention&&e.type_intervention.trim(),date:Object(n.a)(e.date),agent:e.intervenant&&e.intervenant.trim(),note:e.action_sur&&e.action_sur.trim()}))})},function(e,t,r){"use strict";r.r(t),t.default=({polesCompetitivites:e})=>({pole_competitivite:e.map(e=>e.designation_pole)})},function(e,t,r){"use strict";r.r(t),t.default=({predecesseur:{siretetablissementpredecesseur:e,dateliensuccession:t,transfertsiege:r}})=>({predecesseur:{siret:e,date_transfert:t,transfert_siege:r}})},function(e,t,r){"use strict";r.r(t);var n=r(4),i=r.n(n),s=r(5),o=r(0);t.default=({rupcoEtablissements:e})=>Object(s.a)(e,a);const a=(e,t)=>{const r=e.filter(({type:e})=>e.startsWith(t));return c(r)},c=e=>e.map(({date_enregistrement:e,type:t,numero:r,historique_si:n,rupcoProcedure:s,dataValues:{nombre_de_ruptures_de_contrats_en_debut_de_:a,nombre_de_ruptures_de_contrats_en_fin_de_pr:c}})=>({date_enregistrement:Object(o.a)(e),type:t,numero:r,etat:i()(s,"etat"),nombre_de_ruptures:+c||+a||0,historique_si:n})).filter(e=>Object(s.b)(e)&&Object(s.c)(e)).map(e=>Object(s.e)(Object(s.d)(e)))},function(e,t,r){"use strict";r.r(t),t.default=({successeur:{siretetablissementsuccesseur:e,dateliensuccession:t,transfertsiege:r}})=>({successeur:{siret:e,date_transfert:t,transfert_siege:r}})},function(e,t,r){"use strict";r.r(t),t.default=({ucEff:e})=>({unite_controle_competente:n(e.cod_section,e.nme_ddtefp3)});const n=(e,t)=>{let r=e;return t&&(r+=` (${t})`),r}},function(e,t,r){"use strict";r.r(t),r.d(t,"Entreprise",(function(){return pe})),r.d(t,"Etablissement",(function(){return he})),r.d(t,"DataSource",(function(){return p})),r.d(t,"_",(function(){return Se})),r.d(t,"isSIRET",(function(){return Ee})),r.d(t,"isSIREN",(function(){return Te}));var n=r(22);function i(e){this.message="Invalid SIRET or SIREN. "+e}i.prototype=Object.create(Error.prototype,{constructor:{value:i},name:{value:"InvalidIdentifierError"},stack:{get:function(){return(new Error).stack}}});var s=i;function o(e){this.message=`The source ${e} is not found`}o.prototype=Object.create(Error.prototype,{constructor:{value:o},name:{value:"NotFoundSourceError"},stack:{get:function(){return(new Error).stack}}});var a=o;function c(e,t=!1){if(!/^[0-9]{9}$/.test(e))return!1;if(!t)return!0;return e.split("").reduce((e,t,r)=>{t=+t;return r%2==0?e+t:e+((t*=2)>9?t-9:t)},0)%10==0}function u(e,t=!1){if(!/^[0-9]{14}$/.test(e))return!1;if(!t)return!0;return e.split("").reduce((e,t,r)=>{t=+t;return r%2!=0?e+t:e+((t*=2)>9?t-9:t)},0)%10==0}function l(e){const t=(new Error).stack.split("\n")[2].replace(" at ","");this.message=`The method ${t} isn't implemented.`,e&&(this.message+=` Message: "${e}".`);let r=this.message;for(;r.indexOf("  ")>-1;)r=r.replace("  "," ");this.message=r}l.prototype=Object.create(Error.prototype,{constructor:{value:l},name:{value:"NotImplementedError"},stack:{get:function(){return(new Error).stack}}});var f=l;class p{async getSIRET(){throw new f}async getSIREN(){throw new f}getSIRETCheck(){throw new f}getSIRENCheck(){throw new f}}var d={convertDate:e=>(e>1e11&&(e/=1e3),+e&&new Date(1e3*e)||void 0),getCleanAddress:e=>`\n    ${e.numero_voie||""} ${e.type_voie||""} ${e.nom_voie||""}\n    ${e.complement_adresse||""} ${e.code_postal||""}\n    ${e.localite||""}\n    `.trim().split("\n").map(e=>e.trim().replace(/\s+/g," ")).filter(e=>e.length>0).join("\n"),isEmpty:e=>null==e||"object"==typeof e&&0===Object.keys(e).length||"string"==typeof e&&0===e.trim().length,requestAPI:async(e,t,r={})=>{try{const n=await e.get(t,r);if(n&&n.data)return n.data||{}}catch(e){if(e&&"request"in e){let{message:t,request:r,response:n,config:i}=e;"object"!=typeof i&&(i={}),"object"!=typeof r.res&&(r.res={}),"object"!=typeof n&&(n={}),n.data||(n.data="(no data)");let{responseUrl:s}=r.res;s=s||r._currentUrl||("object"==typeof r._currentRequest||"string"==typeof r.path?`${(""+(i.baseURL||"(unknown host)")).replace(/^(https?:\/\/[^/]*).*$/i,"$1")}${r._currentRequest&&r._currentRequest.path||r.path}`:"unknown url");const o="object"==typeof n.data?JSON.stringify(n.data,!0,2):n.data,a=JSON.stringify(i.proxy||!1,!0,2);console.error(`\n--\n⚠️  ${t}\n${s}\nProxy: ${a}\n--\n${o}\n--\n`.trim())}else console.error(e)}return Promise.resolve({})}},m=r(4),b=r.n(m),y=async(e,t)=>{const r={};if("object"!=typeof e)return r;for(const n of t){const t="object"==typeof n?n.in:n,i="object"==typeof n?n.out:n,s="object"==typeof n&&n.defaultValue?n.defaultValue:void 0;let o=b()(e,t,s);n.callback&&(o=await n.callback(o,e)),r[i]="boolean"==typeof o?o:o||void 0}return r};var h=async(e,t,r)=>await d.requestAPI(t,"etablissements/"+e,r).then(e=>{const t=["siret","siege_social",{in:"siege_social",out:"categorie_etablissement",callback:e=>d.isEmpty(e)?void 0:e?"Siège social":"Établissement"},"enseigne","naf","libelle_naf",{in:"date_creation_etablissement",out:"date_creation",callback:e=>d.convertDate(e)},{in:"region_implantation.code",out:"code_region",callback:e=>e&&+e},{in:"region_implantation.value",out:"region"},{in:"tranche_effectif_salarie_etablissement",out:"etablissement_employeur",callback:e=>e&&+e.a>0},{in:"tranche_effectif_salarie_etablissement.intitule",out:"tranche_effectif_insee"},{in:"tranche_effectif_salarie_etablissement.date_reference",out:"annee_tranche_effectif_insee",callback:e=>e&&+e},{in:"adresse",out:"adresse",callback:e=>"object"==typeof e?d.getCleanAddress(e):void 0},{in:"adresse",out:"adresse_composant"},{in:"adresse",out:"departement",callback:e=>"object"==typeof e?"string"==typeof e.code_insee_localite&&e.code_insee_localite.length>1&&e.code_insee_localite.substr(0,2):void 0}];return e&&e.etablissement?y(e.etablissement,t):{}});var _=async(e,t,r)=>await d.requestAPI(t,"exercices/"+e,r).then(e=>{if(e&&Array.isArray(e.exercices)){const t={};return e.exercices.forEach(e=>{t[d.convertDate(e.date_fin_exercice_timestamp).toISOString()]=+e.ca||null}),{donnees_ecofi:t}}});var g=async(e,t,r)=>await d.requestAPI(t,`etablissements/${e}/predecesseur`,r).then(e=>{if(e&&e.predecesseur){const t=e.predecesseur;if(t)return{predecesseur:{siret:t.predecesseur_siret,date_transfert:d.convertDate(t.predecesseur_date_etablissement)}}}});var O=async(e,t,r)=>await d.requestAPI(t,`etablissements/${e}/successeur`,r).then(e=>{if(e&&e.successeur){const t=e.successeur;if(t)return{successeur:{siret:t.successeur_siret,date_transfert:d.convertDate(t.successeur_date_etablissement),transfert_siege:!!t.transfert_siege}}}}),v=r(6),S=r.n(v),j=r(3);const E=e=>S()(e,["annee","mois"],["desc","desc"]).slice(0,3),T=(e,t,r,n)=>{const i=new Date,s=[],o=[];for(let a=1;a<=5;a++){const c=Object(j.subMonths)(i,a),u=Object(j.format)(c,"yyyy"),l=Object(j.format)(c,"MM"),f=d.requestAPI(e,`effectifs_mensuels_acoss_covid/${u}/${l}/${r}/${n}`,t).then(e=>{if(null==e||!e.effectifs_mensuels)return null;o.push(e)});s.push(f)}return Promise.all(s).then(()=>({effectifMensuelEtp:E(o)})).catch(()=>({effectifMensuelEtp:E(o)}))};var R={getEtablissement:h,exercices:_,predecesseur:g,successeur:O,effectifsMensuelEtp:async(e,t,r)=>await T(t,r,"etablissement",e)};var I={getEntreprise:async(e,t,r)=>await d.requestAPI(t,"entreprises/"+e,r).then(e=>{const t=["categorie_entreprise","siren",{in:"raison_sociale",out:"raison_sociale",callback:e=>e&&e.replace("*/"," ").replace("/","").trim()},"nom_commercial","nom","prenom","siret_siege_social","capital_social","numero_tva_intracommunautaire",{in:"forme_juridique",out:"categorie_juridique"},{in:"forme_juridique_code",out:"categorie_juridique_code"},{in:"naf_entreprise",out:"naf"},{in:"libelle_naf_entreprise",out:"libelle_naf"},{in:"tranche_effectif_salarie_entreprise.date_reference",out:"annee_tranche_effectif"},{in:"tranche_effectif_salarie_entreprise.intitule",out:"tranche_effectif"},{in:"tranche_effectif_salarie_entreprise",out:"entreprise_employeur",callback:e=>e&&+e.a>0},{in:"mandataires_sociaux",out:"mandataires_sociaux",callback:e=>Array.isArray(e)?e.map(e=>({nom:e.nom,prenom:e.prenom,fonction:e.fonction,raison_sociale:e.raison_sociale})):null},{in:"date_creation",out:"date_de_creation",callback:e=>d.convertDate(e)},{in:"date_radiation",out:"date_de_radiation",callback:e=>d.convertDate(e)}];return e&&e.entreprise?y(e.entreprise,t):{}}),infogreffe_rcs:async(e,t,r)=>await d.requestAPI(t,"extraits_rcs_infogreffe/"+e,r).then(e=>{if("object"!=typeof e||!e.siren)return{};const t={rcs_date_immatriculation:e.date_immatriculation};return Array.isArray(e.observations)&&e.observations.length&&(t.rcs_observations=e.observations.map(({libelle:e,date:t})=>({date:t,libelle:e.trim()}))),t}),effectifsMensuelEtp:async(e,t,r)=>await T(t,r,"entreprise",e),effectifsAnnuelEtp:async(e,t,r)=>await d.requestAPI(t,"effectifs_annuels_acoss_covid/"+e,r).then(e=>{if(!e||!e.effectifs_annuels){const e=new Date,t=Object(j.subYears)(e,1);return{effectifAnnuelEtp:{annee:Object(j.format)(t,"yyyy"),effectifs_annuels:void 0}}}return{effectifAnnuelEtp:e}})},N=r(23),w=r.n(N),P=r(24),G=r.n(P);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=async(e,{axios:t,axiosConfig:r,token:n},...i)=>{let s={};const o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r,{params:{token:n,context:"Tiers",recipient:"Direccte Occitanie",object:"FCEE - Direccte Occitanie"}});if(o.proxy&&!0===o.proxy.tunnel){const e={proxy:{}};o.proxy.host&&(e.proxy.host=o.proxy.host),o.proxy.port&&(e.proxy.port=o.proxy.port),o.proxy.auth&&(e.proxy.proxyAuth=`${o.proxy.auth.username||""}:${o.proxy.auth.password||""}`),o.proxy=!1,o.httpsAgent=G.a.httpsOverHttp(e)}const a=i.filter(e=>"function"==typeof e).map(r=>r(e,t,o));return await Promise.all(a).then(e=>{Object.assign(s,...e)}),s};const C=Symbol("_axios");Symbol("_requestAPIs");var k=class extends p{constructor(e,t={}){super(),this.token=null,this[C]=w.a.create({baseURL:e,timeout:3e4}),this.axiosConfig=t}async getSIRET(e){return await A(e,{axios:this[C],axiosConfig:this.axiosConfig,token:this.token},R.getEtablissement,R.exercices,R.effectifsMensuelEtp)}async getSIREN(e){return await A(e,{axios:this[C],axiosConfig:this.axiosConfig,token:this.token},I.getEntreprise,I.infogreffe_rcs,I.effectifsMensuelEtp,I.effectifsAnnuelEtp)}getSIRENCheck(e){return!!e.siren}getSIRETCheck(e){return!!e.siret}},q=r(1),L=r(10);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var K=async e=>{let t=await y(e,["siren",{in:"denominationunitelegale",out:"raison_sociale"},{in:"sigleunitelegale",out:"sigle"},{in:"nomunitelegale",out:"nom"},{in:"prenom1unitelegale",out:"prenom",callback:(e,t)=>{const r=[t.prenom1unitelegale,t.prenom2unitelegale,t.prenom3unitelegale,t.prenom4unitelegale].filter(e=>e).join(" ");return d.isEmpty(r)?void 0:r}},{in:"nomusageunitelegale",out:"nom_commercial"},{in:"categorieentreprise",out:"categorie_entreprise"},{in:"siren",out:"siret_siege_social",callback:(e,{nicsiegeunitelegale:t})=>d.isEmpty(e)||d.isEmpty(t)?void 0:`${e}${t}`},{in:"categorie_juridique.libelle",out:"categorie_juridique"},{in:"categorie_juridique.code",out:"categorie_juridique_code"},{in:"naf.code",out:"naf"},{in:"naf.libelle",out:"libelle_naf"},{in:"datecreationunitelegale",out:"date_de_creation"},{in:"etatadministratifunitelegale",out:"etat_entreprise"},{in:"etatadministratifunitelegale",out:"date_mise_a_jour",callback:(e,{datedebut:t,datederniertraitementunitelegale:r})=>"C"===e?t:r},{in:"datedebut",out:"date_de_radiation"},{in:"caractereemployeurunitelegale",out:"entreprise_employeur"},{in:"anneeeffectifsunitelegale",out:"annee_tranche_effectif"},{in:"trancheeffectifsunitelegale",out:"tranche_effectif"}]);return Object.entries(L.default).forEach(([r,n])=>{const i=e[r];return!!i&&(!(Array.isArray(i)&&!i.length)&&void(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{},n(e))))}),t};function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F={getEntreprise:async e=>{const t=[{model:q.default.Naf},{model:q.default.CategorieJuridique}],r=await q.default.Entreprise.findOne({where:{siren:e},include:t}),n=[...q.default.Entreprise.associatedSources,{model:"RupcoEtablissement",include:[q.default.RupcoProcedure],entity:"rupcoEtablissements"},{model:"Idcc",include:[q.default.IdccDefinition],entity:"idccs"},{model:"InteractionsPole3ESEER",include:[q.default.Etablissement],entity:"interactionsPole3ESEERs"},{model:"InteractionsPole3ESRC",include:[q.default.Etablissement],entity:"interactionsPole3ESRCs"},{model:"InteractionsPoleC",include:[q.default.Etablissement],entity:"interactionsPoleCs"},{model:"InteractionsPoleT",include:[q.default.Etablissement],entity:"interactionsPoleTs"}];return r?(await Promise.all(n.map(({model:t,include:n,entity:i})=>q.default[t].findAll(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){$(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({where:{siren:e}},n&&{include:n})).then(e=>r[i]=e))),await K(r)):{}}},H=r(11);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Y=async e=>{const t=({numerovoieetablissement:e,indicerepetitionetablissement:t,typevoieetablissement:r,libellevoieetablissement:n,complementadresseetablissement:i,codepostaletablissement:s,codecommuneetablissement:o,libellecommuneetablissement:a})=>({numero_voie:e,indice_repetition:t,type_voie:r,nom_voie:n,complement_adresse:i,code_postal:s,code_insee_localite:o,localite:a});let r=await y(e,["siret",{in:"etatadministratifetablissement",out:"actif",callback:e=>e&&"A"===e},{in:"etatadministratifetablissement",out:"etat_etablissement"},{in:"etatadministratifetablissement",out:"etat_etablissement_libelle",callback:e=>{switch(e){case"A":return"Actif";case"F":return"Fermé";case"C":return"Cessé";default:return}}},{in:"datedebut",out:"date_fin"},{in:"datederniertraitementetablissement",out:"date_dernier_traitement_etablissement"},{in:"enseigne1etablissement",out:"enseigne"},{in:"naf.code",out:"naf"},{in:"naf.libelle",out:"libelle_naf"},{in:"etablissementsiege",out:"siege_social",callback:e=>"true"===e},{in:"etablissementsiege",out:"categorie_etablissement",callback:e=>d.isEmpty(e)?void 0:"true"===e?"Siège social":"Établissement"},{in:"datecreationetablissement",out:"date_creation"},{in:"trancheeffectifsetablissement",out:"tranche_effectif_insee"},{in:"anneeeffectifsetablissement",out:"annee_tranche_effectif_insee"},{in:"complementadresseetablissement",out:"adresse_composant",callback:(e,r)=>{const n=t(r);return d.isEmpty(n)?void 0:n}},{in:"complementadresseetablissement",out:"adresse",callback:(e,r)=>{const n=t(r);return d.isEmpty(n)?void 0:d.getCleanAddress(n)}},{in:"caractereemployeuretablissement",out:"etablissement_employeur"},{in:"entreprise.denominationunitelegale",out:"nom_commercial"},{in:"entreprise.nomunitelegale",out:"nom"},{in:"entreprise.prenom1unitelegale",out:"prenom"}]);return Object.entries(H.default).forEach(([t,n])=>{const i=e[t];return!!i&&(!(Array.isArray(i)&&!i.length)&&void(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){V(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r,{},n(e))))}),r};var J={getSettlement:async e=>{const t=[{model:q.default.Naf},{model:q.default.Entreprise},...q.default.Etablissement.associatedSources.map(({model:e})=>({model:q.default[e]})),{model:q.default.RupcoEtablissement,include:[q.default.RupcoProcedure]},{model:q.default.Idcc,include:[q.default.IdccDefinition]}],r=await q.default.Etablissement.findOne({where:{siret:e},include:t});return r?await Y(r):{}},getSettlements:async e=>{const t=await q.default.Etablissement.findAll({where:{siren:e},order:[["etablissementsiege","DESC"],["etatadministratifetablissement","ASC"]]});if(!t)return{};const r=await Promise.all(t.map(async e=>await Y(e)));return{nombre_etablissements_actifs:r.filter(e=>e.actif).length,_ets:r}}};const X=Symbol("_requestPG");var W=class extends p{async getSIRET(e){return await this[X](e,J.getSettlement)}async getSIREN(e){return await this[X](e,F.getEntreprise,J.getSettlements)}getSIRENCheck(e){return!!e.siren}getSIRETCheck(e){return!!e.siret}async[X](e,...t){let r={};const n=t.filter(e=>"function"==typeof e).map(async t=>t(e));return await Promise.all(n).then(e=>{Object.assign(r,...e)}),r}};function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const te=Symbol("_importData"),re=Symbol("_data");class ne{constructor(e={}){this[te](e,!0)}updateData(e){this[te](e)}replaceData(e){this[te](e,!0)}getData(){return this[re]}[te](e,t=!1){const r=e=>e||!1===e;if("object"==typeof e)if(t||void 0===this[re])this[re]=Z({},{},{},e);else for(const[t,n]of Object.entries(e))Object.prototype.hasOwnProperty.call(this[re],t)&&!r(n)||(this[re]=Z({},this[re],{},{[t]:n}));Object.keys(this[re]).forEach(e=>{Object.prototype.hasOwnProperty.call(this,e)||Object.defineProperty(this,e,{get:()=>this[re][e]})},this)}}const ie=te;function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ae(e){const t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);return Object.keys(t).reduce((e,r)=>(null!==t[r]&&void 0!==t[r]&&(e[r]=t[r]),e),{})}function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const le=Symbol("_ets"),fe=Symbol("_etsModel");class pe extends ne{constructor(e,t=_e){super(),this[le]=[],this[fe]=t,this.replaceData(e)}[ie](e,t){const r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);let n=r._ets;n&&(Array.isArray(n)||(n=[n]),n.forEach(e=>{e&&"object"==typeof e&&u(e.siret)&&this.getEtablissement(e.siret).updateData(ae(e))}),delete r._ets),super[ie](r,t)}get etablissements(){return this[le]}hasEtablissement(e){return!!this.getEtablissement(e,!1)}getEtablissement(e,t=!0){return this[le].find(t=>t.siret===e)||t&&this[le].push(new this[fe]({siret:e},this))&&this.getEtablissement(e)||null}}function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){be(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ye=Symbol("_entreprise");class he extends ne{constructor(e,t){super(),this[ye]=t,this.replaceData(e)}[ie](e){if(this[ye]){const t=e&&e._etData;t&&"object"==typeof t&&(this[ye].updateData(ae(t)),this[ye].updateData({_dataSources:me({},this[ye]._dataSources,{},e._dataSources)}),delete e._etData)}super[ie](e)}}var _e=pe;function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){ve(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Se={dataSources:Symbol("_dataSources"),compareDataSource:Symbol("_compareDataSource"),askDataSource:Symbol("_askDataSource"),isValidDataSources:Symbol("_isValidDataSources")};class je{constructor(){this.EntrepriseModel=pe,this.EtablissementModel=he,this[Se.dataSources]=[],this.addDataSource({name:"ApiGouv",priority:80,source:new k("https://entreprise.api.gouv.fr:443/v2/")}),this.addDataSource({name:"PG",priority:100,source:new W})}initSentry(e){n.init({dsn:e})}async getEntreprise(e,t){const r=c(e+=""),n=u(e);if(!r&&!n)throw new s(e);const i=r?e:e.substr(0,9),o=new this.EntrepriseModel({_dataSources:{}},this.EtablissementModel);await this[Se.askDataSource]("getSIREN",i,t).then(e=>{o.updateData(Oe({},e.data,{_dataSources:Oe({},o._dataSources,{[e.source.name]:e.success})}))});const a=n?e:""+o.siret_siege_social,l=Object.keys({[o.siret_siege_social]:!0,[a]:!0});return await Promise.all(l.map(e=>{if(u(e))return this[Se.askDataSource]("getSIRET",e,t).then(t=>{console.log(`Using response from dataSource named ${t.source.name} with priority : ${t.source.priority}`);const r=o.getEtablissement(e);r.updateData(Oe({},t.data,{_dataSources:Oe({},r._dataSources,{[t.source.name]:t.success})}))})})),o.updateData({_success:this[Se.isValidDataSources](o._dataSources)}),o.etablissements.map(e=>{e.updateData({_success:this[Se.isValidDataSources](e._dataSources)})}),o}getDataSources(){return[...this[Se.dataSources]].sort(this[Se.compareDataSource])}getDataSource(e){return this[Se.dataSources].find(t=>t.name===e)}addDataSource(e){this[Se.dataSources].includes(e)||this[Se.dataSources].push(e)}removeDataSource(e){this[Se.dataSources]=this[Se.dataSources].filter(t=>t!==e)}[Se.compareDataSource](e,t){return(e=+(e&&e.priority))>(t=+(t&&t.priority))?1:e<t?-1:0}[Se.askDataSource](e,t,r){const n=this.getDataSource(r);if(!n)throw new a(r);return n.source[e](t).then(t=>{const r="object"==typeof t&&t.items?t.items:t,i="object"==typeof r?Array.isArray(r)?r.map(ae):ae(r):r,s=n.source[e+"Check"](i);return{data:i,source:n,success:s}})}[Se.isValidDataSources](e){return e&&!!Object.values(e).includes(!0)}}t.default=new je;const Ee=u,Te=c}])}));